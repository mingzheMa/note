<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.53" />
    <meta name="theme" content="VuePress Theme Hope" />
    <title>vnodeåˆ°domï¼ˆç»„ä»¶æ¸²æŸ“ï¼‰ | marxçš„å­¦ä¹ ç¬”è®°</title><meta name="description" content="éƒ¨åˆ†å†…å®¹æ˜¯å‚è€ƒå¤–éƒ¨æ–‡ç« ï¼Œå±äºä¸ªäººå¤ä¹ ä½¿ç”¨">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style.31e87fe8.css" as="style" /><link rel="stylesheet" href="/assets/style.31e87fe8.css" />
    <link rel="modulepreload" href="/assets/app.9ac9284b.js"><link rel="modulepreload" href="/assets/1.vnodeåˆ°dom.html.6d88c4c4.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/1.vnodeåˆ°dom.html.32d400a2.js"><link rel="prefetch" href="/assets/index.html.6c946c9f.js" as="script" /><link rel="prefetch" href="/assets/ES6å’ŒCommonJSæ¨¡å—åŒ–.html.993609d3.js" as="script" /><link rel="prefetch" href="/assets/index.html.c3b5ae80.js" as="script" /><link rel="prefetch" href="/assets/åŒ…è£…ç±»å‹.html.6ad5c91c.js" as="script" /><link rel="prefetch" href="/assets/æ‰‹å†™CommonJS.html.1498b864.js" as="script" /><link rel="prefetch" href="/assets/æ‰‹å†™Promise.html.a9d665da.js" as="script" /><link rel="prefetch" href="/assets/ç”Ÿæˆå™¨.html.30c11bf8.js" as="script" /><link rel="prefetch" href="/assets/ç±»å‹è½¬æ¢.html.101bf853.js" as="script" /><link rel="prefetch" href="/assets/è¿­ä»£å™¨.html.09e1ba62.js" as="script" /><link rel="prefetch" href="/assets/0.Reactä¸­çš„TSé›†æˆ.html.72297c73.js" as="script" /><link rel="prefetch" href="/assets/0.TSConfigé…ç½®.html.8e862c7f.js" as="script" /><link rel="prefetch" href="/assets/0.inferå…³é”®å­—.html.2de3f009.js" as="script" /><link rel="prefetch" href="/assets/0.å†…ç½®å·¥å…·.html.d0be95a8.js" as="script" /><link rel="prefetch" href="/assets/0.å‡½æ•°é‡è½½.html.472f247a.js" as="script" /><link rel="prefetch" href="/assets/0.æŠ½è±¡ç±».html.73a87988.js" as="script" /><link rel="prefetch" href="/assets/0.æ–­è¨€å‡½æ•°.html.7367871f.js" as="script" /><link rel="prefetch" href="/assets/0.æ¨¡æ¿å­—ç¬¦ä¸².html.ff0f7d9a.js" as="script" /><link rel="prefetch" href="/assets/0.æ¨¡æ¿å­—ç¬¦ä¸²å·¥å…·.html.37bd6f59.js" as="script" /><link rel="prefetch" href="/assets/0.ç±»å‹å±‚çº§.html.d19219c6.js" as="script" /><link rel="prefetch" href="/assets/0.ç±»çš„æ–¹æ³•è¦†ç›–.html.a293b1d6.js" as="script" /><link rel="prefetch" href="/assets/0.é™æ€ç±».html.8181c739.js" as="script" /><link rel="prefetch" href="/assets/100.å®ç°å¯¹æŸä¸ªå¯¹è±¡éƒ¨åˆ†å±æ€§è¿›è¡Œä¿®é¥°.html.c90c47fd.js" as="script" /><link rel="prefetch" href="/assets/101.å®ç°å¯¹è±¡å±æ€§äº’æ–¥ç±»å‹å·¥å…·.html.1c88a8bf.js" as="script" /><link rel="prefetch" href="/assets/102.å®ç°å¯¹è±¡ç±»å‹çš„äº¤å‰å¹¶è¡¥é›†.html.c34a2ab0.js" as="script" /><link rel="prefetch" href="/assets/103.å®ç°æå–æŸä¸ªå¯¹è±¡ä¸­å¿…é€‰å±æ€§.html.1b540263.js" as="script" /><link rel="prefetch" href="/assets/104.å®ç°Pickå’ŒOmitå‡½æ•°å¯¹å±æ€§å€¼æå–.html.5493e78d.js" as="script" /><link rel="prefetch" href="/assets/105.å®ç°å¯¹è±¡æ•°ç»„æ·±å±‚ä¿®é¥°.html.d35935ad.js" as="script" /><link rel="prefetch" href="/assets/index.html.cec00e38.js" as="script" /><link rel="prefetch" href="/assets/HOOK.html.d697ab33.js" as="script" /><link rel="prefetch" href="/assets/index.html.644c3b34.js" as="script" /><link rel="prefetch" href="/assets/Ref.html.82fe80d4.js" as="script" /><link rel="prefetch" href="/assets/æ¸²æŸ“åŸç†.html.0965e517.js" as="script" /><link rel="prefetch" href="/assets/1.æ ¸å¿ƒæ¦‚å¿µ.html.c41f806b.js" as="script" /><link rel="prefetch" href="/assets/2.ç®€å•ä½¿ç”¨.html.35b02576.js" as="script" /><link rel="prefetch" href="/assets/3.å®ç°ç®€æ˜“Redux.html.e69c76e0.js" as="script" /><link rel="prefetch" href="/assets/4.ä¸­é—´ä»¶.html.efc8b7e4.js" as="script" /><link rel="prefetch" href="/assets/index.html.0390cf8c.js" as="script" /><link rel="prefetch" href="/assets/1.install.html.ff2fa99b.js" as="script" /><link rel="prefetch" href="/assets/2.VueRouteræ„é€ å™¨.html.4daaa82a.js" as="script" /><link rel="prefetch" href="/assets/3.matcher.html.57e7a6fe.js" as="script" /><link rel="prefetch" href="/assets/index.html.f9ad7a4b.js" as="script" /><link rel="prefetch" href="/assets/index.html.c73209a9.js" as="script" /><link rel="prefetch" href="/assets/2.diffæµç¨‹.html.3f7433e6.js" as="script" /><link rel="prefetch" href="/assets/3.setup.html.6464d607.js" as="script" /><link rel="prefetch" href="/assets/4.å“åº”å¼.html.44b640e9.js" as="script" /><link rel="prefetch" href="/assets/index.html.b28797b1.js" as="script" /><link rel="prefetch" href="/assets/index.html.d4641eb2.js" as="script" /><link rel="prefetch" href="/assets/optimization.html.b1c39f99.js" as="script" /><link rel="prefetch" href="/assets/å¦‚ä½•å¤„ç†letä¸ºvar.html.347b2682.js" as="script" /><link rel="prefetch" href="/assets/æŒ‰éœ€å¼•å…¥.html.a1796dd7.js" as="script" /><link rel="prefetch" href="/assets/index.html.34f02707.js" as="script" /><link rel="prefetch" href="/assets/http1.0ã€1.1ã€2.0ã€3.0çš„åŒºåˆ«.html.6c1be5f5.js" as="script" /><link rel="prefetch" href="/assets/æ€§èƒ½ä¼˜åŒ–.html.e967da4a.js" as="script" /><link rel="prefetch" href="/assets/1.current.html.ee6a17a4.js" as="script" /><link rel="prefetch" href="/assets/2.confirmTransition.html.1e08f473.js" as="script" /><link rel="prefetch" href="/assets/3.è·¯ç”±å®ˆå«.html.893eaf6b.js" as="script" /><link rel="prefetch" href="/assets/4.url.html.9292353d.js" as="script" /><link rel="prefetch" href="/assets/5.å†…ç½®ç»„ä»¶.html.5418707b.js" as="script" /><link rel="prefetch" href="/assets/6.æ€»ç»“.html.63a80113.js" as="script" /><link rel="prefetch" href="/assets/index.html.24076b77.js" as="script" /><link rel="prefetch" href="/assets/1.ç›®å½•ç»“æ„.html.d9612b02.js" as="script" /><link rel="prefetch" href="/assets/2.æºç æ„å»º.html.e031a84b.js" as="script" /><link rel="prefetch" href="/assets/3.vueå…¥å£.html.e6400f8b.js" as="script" /><link rel="prefetch" href="/assets/1.ä»‹ç».html.15428a35.js" as="script" /><link rel="prefetch" href="/assets/2.new Vueå‘ç”Ÿäº†ä»€ä¹ˆ.html.d10d2c80.js" as="script" /><link rel="prefetch" href="/assets/3.Vue._mount.html.b0dd29c7.js" as="script" /><link rel="prefetch" href="/assets/4.Vue._render.html.3a23c2dc.js" as="script" /><link rel="prefetch" href="/assets/5.VNode.html.f0e0b1a7.js" as="script" /><link rel="prefetch" href="/assets/6.createElement.html.64c5eb72.js" as="script" /><link rel="prefetch" href="/assets/7.Vue._update.html.47465e04.js" as="script" /><link rel="prefetch" href="/assets/1.ä»‹ç».html.3a17ad55.js" as="script" /><link rel="prefetch" href="/assets/2.å“åº”å¼å¯¹è±¡.html.ea1d4db3.js" as="script" /><link rel="prefetch" href="/assets/3.ä¾èµ–æ”¶é›†.html.7b50dfa2.js" as="script" /><link rel="prefetch" href="/assets/4.æ´¾å‘æ›´æ–°.html.ae5d0c6a.js" as="script" /><link rel="prefetch" href="/assets/5._nexttick.html.7edd0ede.js" as="script" /><link rel="prefetch" href="/assets/6.æ£€æµ‹æ•°æ®å˜åŒ–.html.2155d52d.js" as="script" /><link rel="prefetch" href="/assets/7.è®¡ç®—å±æ€§å’Œç›‘å¬å±æ€§.html.5b224810.js" as="script" /><link rel="prefetch" href="/assets/1.ä»‹ç».html.a23cd9c1.js" as="script" /><link rel="prefetch" href="/assets/2.createComponent.html.57dccc1a.js" as="script" /><link rel="prefetch" href="/assets/3.patch.html.a97ff2e4.js" as="script" /><link rel="prefetch" href="/assets/1.keep-alive.html.36b34e0c.js" as="script" /><link rel="prefetch" href="/assets/404.html.c5de7dd9.js" as="script" /><link rel="prefetch" href="/assets/index.html.2c89d7a1.js" as="script" /><link rel="prefetch" href="/assets/ES6å’ŒCommonJSæ¨¡å—åŒ–.html.1b3df876.js" as="script" /><link rel="prefetch" href="/assets/index.html.6b68a311.js" as="script" /><link rel="prefetch" href="/assets/åŒ…è£…ç±»å‹.html.b6b457b7.js" as="script" /><link rel="prefetch" href="/assets/æ‰‹å†™CommonJS.html.69b5b2dc.js" as="script" /><link rel="prefetch" href="/assets/æ‰‹å†™Promise.html.9c97775a.js" as="script" /><link rel="prefetch" href="/assets/ç”Ÿæˆå™¨.html.2137c5bc.js" as="script" /><link rel="prefetch" href="/assets/ç±»å‹è½¬æ¢.html.ef4cb90c.js" as="script" /><link rel="prefetch" href="/assets/è¿­ä»£å™¨.html.e9946bad.js" as="script" /><link rel="prefetch" href="/assets/0.Reactä¸­çš„TSé›†æˆ.html.063517e8.js" as="script" /><link rel="prefetch" href="/assets/0.TSConfigé…ç½®.html.432b6aff.js" as="script" /><link rel="prefetch" href="/assets/0.inferå…³é”®å­—.html.a95448c5.js" as="script" /><link rel="prefetch" href="/assets/0.å†…ç½®å·¥å…·.html.f08316de.js" as="script" /><link rel="prefetch" href="/assets/0.å‡½æ•°é‡è½½.html.1102790d.js" as="script" /><link rel="prefetch" href="/assets/0.æŠ½è±¡ç±».html.727e4ade.js" as="script" /><link rel="prefetch" href="/assets/0.æ–­è¨€å‡½æ•°.html.c9c612bf.js" as="script" /><link rel="prefetch" href="/assets/0.æ¨¡æ¿å­—ç¬¦ä¸².html.75443447.js" as="script" /><link rel="prefetch" href="/assets/0.æ¨¡æ¿å­—ç¬¦ä¸²å·¥å…·.html.74aca23c.js" as="script" /><link rel="prefetch" href="/assets/0.ç±»å‹å±‚çº§.html.143c83c5.js" as="script" /><link rel="prefetch" href="/assets/0.ç±»çš„æ–¹æ³•è¦†ç›–.html.dfb1256b.js" as="script" /><link rel="prefetch" href="/assets/0.é™æ€ç±».html.43b26a81.js" as="script" /><link rel="prefetch" href="/assets/100.å®ç°å¯¹æŸä¸ªå¯¹è±¡éƒ¨åˆ†å±æ€§è¿›è¡Œä¿®é¥°.html.dd184ed8.js" as="script" /><link rel="prefetch" href="/assets/101.å®ç°å¯¹è±¡å±æ€§äº’æ–¥ç±»å‹å·¥å…·.html.c65e5683.js" as="script" /><link rel="prefetch" href="/assets/102.å®ç°å¯¹è±¡ç±»å‹çš„äº¤å‰å¹¶è¡¥é›†.html.63a5136a.js" as="script" /><link rel="prefetch" href="/assets/103.å®ç°æå–æŸä¸ªå¯¹è±¡ä¸­å¿…é€‰å±æ€§.html.256b6053.js" as="script" /><link rel="prefetch" href="/assets/104.å®ç°Pickå’ŒOmitå‡½æ•°å¯¹å±æ€§å€¼æå–.html.1a3a4d30.js" as="script" /><link rel="prefetch" href="/assets/105.å®ç°å¯¹è±¡æ•°ç»„æ·±å±‚ä¿®é¥°.html.5ef79a04.js" as="script" /><link rel="prefetch" href="/assets/index.html.0f50d2da.js" as="script" /><link rel="prefetch" href="/assets/HOOK.html.31093e5b.js" as="script" /><link rel="prefetch" href="/assets/index.html.92aa14b3.js" as="script" /><link rel="prefetch" href="/assets/Ref.html.dadb3e11.js" as="script" /><link rel="prefetch" href="/assets/æ¸²æŸ“åŸç†.html.40813145.js" as="script" /><link rel="prefetch" href="/assets/1.æ ¸å¿ƒæ¦‚å¿µ.html.9ca7e58d.js" as="script" /><link rel="prefetch" href="/assets/2.ç®€å•ä½¿ç”¨.html.be334732.js" as="script" /><link rel="prefetch" href="/assets/3.å®ç°ç®€æ˜“Redux.html.5404d971.js" as="script" /><link rel="prefetch" href="/assets/4.ä¸­é—´ä»¶.html.816326b4.js" as="script" /><link rel="prefetch" href="/assets/index.html.f15d1a10.js" as="script" /><link rel="prefetch" href="/assets/1.install.html.de1d4f22.js" as="script" /><link rel="prefetch" href="/assets/2.VueRouteræ„é€ å™¨.html.6eadb60e.js" as="script" /><link rel="prefetch" href="/assets/3.matcher.html.97a53819.js" as="script" /><link rel="prefetch" href="/assets/index.html.9d0836aa.js" as="script" /><link rel="prefetch" href="/assets/index.html.266b5a3f.js" as="script" /><link rel="prefetch" href="/assets/2.diffæµç¨‹.html.f8d88d50.js" as="script" /><link rel="prefetch" href="/assets/3.setup.html.a49ffe9b.js" as="script" /><link rel="prefetch" href="/assets/4.å“åº”å¼.html.c4c70b9a.js" as="script" /><link rel="prefetch" href="/assets/index.html.e45ffebc.js" as="script" /><link rel="prefetch" href="/assets/index.html.22f74fb9.js" as="script" /><link rel="prefetch" href="/assets/optimization.html.bcaa7f29.js" as="script" /><link rel="prefetch" href="/assets/å¦‚ä½•å¤„ç†letä¸ºvar.html.98f4f3b5.js" as="script" /><link rel="prefetch" href="/assets/æŒ‰éœ€å¼•å…¥.html.e1489e28.js" as="script" /><link rel="prefetch" href="/assets/index.html.efd612a9.js" as="script" /><link rel="prefetch" href="/assets/http1.0ã€1.1ã€2.0ã€3.0çš„åŒºåˆ«.html.34b00bd1.js" as="script" /><link rel="prefetch" href="/assets/æ€§èƒ½ä¼˜åŒ–.html.5b363158.js" as="script" /><link rel="prefetch" href="/assets/1.current.html.615ba843.js" as="script" /><link rel="prefetch" href="/assets/2.confirmTransition.html.e0f18c0f.js" as="script" /><link rel="prefetch" href="/assets/3.è·¯ç”±å®ˆå«.html.fa35d094.js" as="script" /><link rel="prefetch" href="/assets/4.url.html.ad111fc7.js" as="script" /><link rel="prefetch" href="/assets/5.å†…ç½®ç»„ä»¶.html.7291d2d9.js" as="script" /><link rel="prefetch" href="/assets/6.æ€»ç»“.html.f79941f5.js" as="script" /><link rel="prefetch" href="/assets/index.html.1d444c5a.js" as="script" /><link rel="prefetch" href="/assets/1.ç›®å½•ç»“æ„.html.836b91c6.js" as="script" /><link rel="prefetch" href="/assets/2.æºç æ„å»º.html.e68b20be.js" as="script" /><link rel="prefetch" href="/assets/3.vueå…¥å£.html.3774a898.js" as="script" /><link rel="prefetch" href="/assets/1.ä»‹ç».html.2fc15692.js" as="script" /><link rel="prefetch" href="/assets/2.new Vueå‘ç”Ÿäº†ä»€ä¹ˆ.html.73024452.js" as="script" /><link rel="prefetch" href="/assets/3.Vue._mount.html.f356355e.js" as="script" /><link rel="prefetch" href="/assets/4.Vue._render.html.a490651f.js" as="script" /><link rel="prefetch" href="/assets/5.VNode.html.a85b0350.js" as="script" /><link rel="prefetch" href="/assets/6.createElement.html.847cdf2e.js" as="script" /><link rel="prefetch" href="/assets/7.Vue._update.html.f01baaf2.js" as="script" /><link rel="prefetch" href="/assets/1.ä»‹ç».html.b83f26c0.js" as="script" /><link rel="prefetch" href="/assets/2.å“åº”å¼å¯¹è±¡.html.7aaf5220.js" as="script" /><link rel="prefetch" href="/assets/3.ä¾èµ–æ”¶é›†.html.ed2bf5ca.js" as="script" /><link rel="prefetch" href="/assets/4.æ´¾å‘æ›´æ–°.html.3767f650.js" as="script" /><link rel="prefetch" href="/assets/5._nexttick.html.b3a0d6c2.js" as="script" /><link rel="prefetch" href="/assets/6.æ£€æµ‹æ•°æ®å˜åŒ–.html.45df22fa.js" as="script" /><link rel="prefetch" href="/assets/7.è®¡ç®—å±æ€§å’Œç›‘å¬å±æ€§.html.bfe7892e.js" as="script" /><link rel="prefetch" href="/assets/1.ä»‹ç».html.5c06c2a5.js" as="script" /><link rel="prefetch" href="/assets/2.createComponent.html.f5383b13.js" as="script" /><link rel="prefetch" href="/assets/3.patch.html.8b9599e6.js" as="script" /><link rel="prefetch" href="/assets/1.keep-alive.html.e64a9e8c.js" as="script" /><link rel="prefetch" href="/assets/404.html.c6c41902.js" as="script" /><link rel="prefetch" href="/assets/photoswipe.esm.720e8656.js" as="script" />
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><!----><!----><span class="site-name">marxçš„å­¦ä¹ ç¬”è®°</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/JS/" class="nav-link" aria-label="JS"><!---->JS<!----></a></div><div class="nav-item hide-in-mobile"><a href="/TS/" class="nav-link" aria-label="TS"><!---->TS<!----></a></div><div class="nav-item hide-in-mobile"><a href="/webpack/" class="nav-link" aria-label="webpack"><!---->webpack<!----></a></div><div class="nav-item hide-in-mobile"><a href="/react/" class="nav-link" aria-label="react"><!---->react<!----></a></div><div class="nav-item hide-in-mobile"><a href="/redux/" class="nav-link" aria-label="redux"><!---->redux<!----></a></div><div class="nav-item hide-in-mobile"><a href="/vue2%E6%BA%90%E7%A0%81/" class="nav-link" aria-label="vue2æºç "><!---->vue2æºç <!----></a></div><div class="nav-item hide-in-mobile"><a href="/vue3%E6%BA%90%E7%A0%81/" class="nav-link active" aria-label="vue3æºç "><!---->vue3æºç <!----></a></div><div class="nav-item hide-in-mobile"><a href="/vue-router3%E6%BA%90%E7%A0%81/" class="nav-link" aria-label="vue-router3æºç "><!---->vue-router3æºç <!----></a></div><div class="nav-item hide-in-mobile"><a href="/%E7%BD%91%E7%BB%9C/" class="nav-link" aria-label="ç½‘ç»œ"><!---->ç½‘ç»œ<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/vue3%E6%BA%90%E7%A0%81/" class="nav-link sidebar-link sidebar-page" aria-label="é¦–é¡µ"><!---->é¦–é¡µ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="vnodeåˆ°domï¼ˆç»„ä»¶æ¸²æŸ“ï¼‰"><!---->vnodeåˆ°domï¼ˆç»„ä»¶æ¸²æŸ“ï¼‰<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#åˆå§‹åŒ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆå§‹åŒ–"><!---->åˆå§‹åŒ–<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#åˆ›å»ºappå®ä¾‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ›å»ºappå®ä¾‹"><!---->åˆ›å»ºappå®ä¾‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#é‡å†™mountæ–¹æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é‡å†™mountæ–¹æ³•"><!---->é‡å†™mountæ–¹æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#åˆ›å»ºvnodeå’Œæ¸²æŸ“vnode" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ›å»ºvnodeå’Œæ¸²æŸ“vnode"><!---->åˆ›å»ºvnodeå’Œæ¸²æŸ“vnode<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#åˆ›å»ºvnode" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ›å»ºvnode"><!---->åˆ›å»ºvnode<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#æ¸²æŸ“vnode" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¸²æŸ“vnode"><!---->æ¸²æŸ“vnode<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#æ€»ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ€»ç»“"><!---->æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/vue3%E6%BA%90%E7%A0%81/2.diff%E6%B5%81%E7%A8%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="diffæµç¨‹ï¼ˆç»„ä»¶æ›´æ–°ï¼‰"><!---->diffæµç¨‹ï¼ˆç»„ä»¶æ›´æ–°ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/vue3%E6%BA%90%E7%A0%81/3.setup.html" class="nav-link sidebar-link sidebar-page" aria-label="setupï¼ˆç»„ä»¶åˆå§‹åŒ–ï¼‰"><!---->setupï¼ˆç»„ä»¶åˆå§‹åŒ–ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/vue3%E6%BA%90%E7%A0%81/4.%E5%93%8D%E5%BA%94%E5%BC%8F.html" class="nav-link sidebar-link sidebar-page" aria-label="å“åº”å¼"><!---->å“åº”å¼<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->vnodeåˆ°domï¼ˆç»„ä»¶æ¸²æŸ“ï¼‰</h1><div class="page-info"><!----><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-12-02T09:12:10.000Z"></span><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 12 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT12M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#åˆå§‹åŒ–" class="router-link-active router-link-exact-active toc-link level2">åˆå§‹åŒ–</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#åˆ›å»ºappå®ä¾‹" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºappå®ä¾‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#é‡å†™mountæ–¹æ³•" class="router-link-active router-link-exact-active toc-link level3">é‡å†™mountæ–¹æ³•</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#åˆ›å»ºvnodeå’Œæ¸²æŸ“vnode" class="router-link-active router-link-exact-active toc-link level2">åˆ›å»ºvnodeå’Œæ¸²æŸ“vnode</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#åˆ›å»ºvnode" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºvnode</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#æ¸²æŸ“vnode" class="router-link-active router-link-exact-active toc-link level3">æ¸²æŸ“vnode</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/vue3%E6%BA%90%E7%A0%81/1.vnode%E5%88%B0dom.html#æ€»ç»“" class="router-link-active router-link-exact-active toc-link level2">æ€»ç»“</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="vnodeåˆ°dom-ç»„ä»¶æ¸²æŸ“" tabindex="-1"><a class="header-anchor" href="#vnodeåˆ°dom-ç»„ä»¶æ¸²æŸ“" aria-hidden="true">#</a> vnodeåˆ°domï¼ˆç»„ä»¶æ¸²æŸ“ï¼‰</h1><p>åœ¨vue3ä¸­ç»„ä»¶æ˜¯å¾ˆé‡è¦çš„æ¦‚å¿µï¼Œæ•´ä¸ªåº”ç”¨éƒ½æ˜¯ç”±ç»„ä»¶æ„æˆï¼Œç»„ä»¶æ˜¯å¯¹ä¸€é¢—domæ ‘çš„æŠ½è±¡ï¼Œä¸€ä¸ªç»„ä»¶ç”ŸæˆçœŸå®çš„domæœ‰ä»¥ä¸‹æ­¥éª¤</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>æ„å»ºvnode =&gt; æ¸²æŸ“vnode =&gt; ç”Ÿæˆdom
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä»åˆå§‹åŒ–é˜¶æ®µå¼€å§‹åˆ†æ</p><h2 id="åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–" aria-hidden="true">#</a> åˆå§‹åŒ–</h2><p>æ¸²æŸ“ä¸€é¢—æ ‘æ˜¯éœ€è¦ä»æ ¹å…ƒç´ è¿›è¡Œæ¸²æŸ“ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å¦‚ä½•ä½¿ç”¨vue</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// vue2.x</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App&#39;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// vue3.x</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./app&#39;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹å‡ºvue2.xå’Œ3.xåˆå§‹åŒ–é˜¶æ®µè¿˜æ˜¯æœ‰ä¸€å®šåŒºåˆ«çš„ï¼Œvue2éœ€è¦<code>new Vue</code>æ¥è·å¾—å®ä¾‹ä»è€Œè°ƒç”¨æ–¹æ³•ï¼Œè€Œvue3æä¾›äº†<code>createApp</code>å‡½æ•°è¿”å›å®ä¾‹åœ¨è°ƒç”¨å…¶æ–¹æ³•æŒ‚è½½ï¼Œæœ¬è´¨ä¸Šä¸¤è€…éƒ½æ˜¯å°†ç»„ä»¶æŒ‚è½½åˆ°çœŸå®domä¸Šï¼Œæˆ‘ä»¬çœ‹ä¸‹vue3çš„å†…éƒ¨å®ç°</p><blockquote><p>vue2æ˜¯å°†æ–¹æ³•éƒ½æŒ‚è½½åœ¨vueæ„é€ å‡½æ•°ä¸Šï¼Œvue3å°†ä¸€äº›apiæå–å‡ºæ¥ï¼Œä½¿ç”¨å¯¼å…¥çš„æ–¹å¼è°ƒç”¨ï¼Œè¿™ä¹ˆåšçš„å¥½å¤„æ˜¯åœ¨æ‰“åŒ…é˜¶æ®µåˆ©ç”¨tree-shakingèˆå¼ƒæ‰å¯¼å‡ºæœªä½¿ç”¨çš„ä»£ç </p></blockquote><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> createApp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">ensureRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> mount <span class="token punctuation">}</span> <span class="token operator">=</span> app
  app<span class="token punctuation">.</span>mount <span class="token operator">=</span> <span class="token punctuation">(</span>containerOrSelector<span class="token operator">:</span> Element <span class="token operator">|</span> ShadowRoot <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>

  <span class="token keyword">return</span> app
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">as</span> CreateAppFunction<span class="token operator">&lt;</span>Element<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°å…¶å†…éƒ¨é€šè¿‡<code>ensureRenderer().createApp(...args)</code>åˆ›å»ºäº†ä¸€ä¸ªappå®ä¾‹ï¼Œå¹¶ä¿®æ”¹å®ä¾‹çš„<code>mount</code>ï¼Œæœ€åå°†å®ä¾‹è¿”å›ï¼Œæˆ‘ä»¬é€æ­¥ç ”ç©¶å…¶å†…éƒ¨æ„é€ </p><h3 id="åˆ›å»ºappå®ä¾‹" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºappå®ä¾‹" aria-hidden="true">#</a> åˆ›å»ºappå®ä¾‹</h3><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> createApp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">ensureRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">as</span> CreateAppFunction<span class="token operator">&lt;</span>Element<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>appå®ä¾‹æ˜¯é€šè¿‡æ¸²æŸ“å™¨<code>ensureRenderer()</code>è°ƒç”¨<code>createApp</code>æ–¹æ³•åˆ›å»ºçš„ï¼Œ</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">let</span> renderer<span class="token operator">:</span> Renderer<span class="token operator">&lt;</span>Element <span class="token operator">|</span> ShadowRoot<span class="token operator">&gt;</span> <span class="token operator">|</span> HydrationRenderer

<span class="token keyword">function</span> <span class="token function">ensureRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    renderer <span class="token operator">||</span>
    <span class="token punctuation">(</span>renderer <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createRenderer</span><span class="token generic class-name"><span class="token operator">&lt;</span>Node<span class="token punctuation">,</span> Element <span class="token operator">|</span> ShadowRoot<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>rendererOptions<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‡½æ•°<code>ensureRenderer</code>é€šè¿‡ä¼ å…¥ä¸€ä¸ªé…ç½®åˆ›å»ºä¸€ä¸ªæ¸²æŸ“å™¨ï¼Œé€šè¿‡é…ç½®ç”Ÿæˆæ¸²æŸ“å™¨æ˜¯å› ä¸ºvue3ä¸æ­¢æœ‰webç¯å¢ƒï¼Œè¿™ä¹ˆåšèƒ½é™ä½ä»£ç è€¦åˆåº¦</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createRenderer</span><span class="token generic class-name"><span class="token operator">&lt;</span>
  HostNode <span class="token operator">=</span> RendererNode<span class="token punctuation">,</span>
  HostElement <span class="token operator">=</span> RendererElement
<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>options<span class="token operator">:</span> RendererOptions<span class="token operator">&lt;</span>HostNode<span class="token punctuation">,</span> HostElement<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">baseCreateRenderer</span><span class="token generic class-name"><span class="token operator">&lt;</span>HostNode<span class="token punctuation">,</span> HostElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">baseCreateRenderer</span><span class="token punctuation">(</span>
  options<span class="token operator">:</span> RendererOptions<span class="token punctuation">,</span>
  createHydrationFns<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">typeof</span> createHydrationFunctions
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token keyword">const</span> render<span class="token operator">:</span> <span class="token function-variable function">RootRenderFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> container<span class="token punctuation">,</span> isSVG<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    render<span class="token punctuation">,</span>
    createApp<span class="token operator">:</span> <span class="token function">createAppAPI</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€ç»ˆè°ƒç”¨<code>baseCreateRenderer</code>å‡½æ•°è¿”å›æ¸²æŸ“å™¨ï¼Œå…¶å±æ€§<code>createApp</code>æ˜¯é€šè¿‡<code>createAppAPI(render)</code>åˆ›å»ºçš„</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createAppAPI</span><span class="token generic class-name"><span class="token operator">&lt;</span>HostElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  render<span class="token operator">:</span> RootRenderFunction<span class="token operator">&lt;</span>HostElement<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  hydrate<span class="token operator">?</span><span class="token operator">:</span> RootHydrateFunction
<span class="token punctuation">)</span><span class="token operator">:</span> CreateAppFunction<span class="token operator">&lt;</span>HostElement<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">createApp</span><span class="token punctuation">(</span>rootComponent<span class="token punctuation">,</span> rootProps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token function">createAppContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">let</span> isMounted <span class="token operator">=</span> <span class="token boolean">false</span>

    <span class="token keyword">const</span> app<span class="token operator">:</span> App <span class="token operator">=</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>app <span class="token operator">=</span> <span class="token punctuation">{</span>
      _uid<span class="token operator">:</span> uid<span class="token operator">++</span><span class="token punctuation">,</span>
      _component<span class="token operator">:</span> rootComponent <span class="token keyword">as</span> ConcreteComponent<span class="token punctuation">,</span>
      _props<span class="token operator">:</span> rootProps<span class="token punctuation">,</span>
      _container<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      _context<span class="token operator">:</span> context<span class="token punctuation">,</span>
      _instance<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>

      version<span class="token punctuation">,</span>

      <span class="token keyword">get</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> context<span class="token punctuation">.</span>config
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token function">use</span><span class="token punctuation">(</span>plugin<span class="token operator">:</span> Plugin<span class="token punctuation">,</span> <span class="token operator">...</span>options<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token function">mixin</span><span class="token punctuation">(</span>mixin<span class="token operator">:</span> ComponentOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token function">component</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> component<span class="token operator">?</span><span class="token operator">:</span> Component<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token function">directive</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> directive<span class="token operator">?</span><span class="token operator">:</span> Directive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token function">mount</span><span class="token punctuation">(</span>
        rootContainer<span class="token operator">:</span> HostElement<span class="token punctuation">,</span>
        isHydrate<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
        isSVG<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
      <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isMounted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">createVNode</span><span class="token punctuation">(</span>
            rootComponent <span class="token keyword">as</span> ConcreteComponent<span class="token punctuation">,</span>
            rootProps
          <span class="token punctuation">)</span>
          <span class="token comment">// store app context on the root VNode.</span>
          <span class="token comment">// this will be set on the root instance on initial mount.</span>
          vnode<span class="token punctuation">.</span>appContext <span class="token operator">=</span> context

          <span class="token function">render</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> rootContainer<span class="token punctuation">,</span> isSVG<span class="token punctuation">)</span>

          isMounted <span class="token operator">=</span> <span class="token boolean">true</span>
          app<span class="token punctuation">.</span>_container <span class="token operator">=</span> rootContainer
          <span class="token comment">// for devtools and telemetry</span>
          <span class="token punctuation">(</span>rootContainer <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__vue_app__ <span class="token operator">=</span> app

          <span class="token keyword">return</span> <span class="token function">getExposeProxy</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>component<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token operator">||</span> vnode<span class="token punctuation">.</span>component<span class="token operator">!</span><span class="token punctuation">.</span>proxy
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token function">unmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token function">provide</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> app
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>createAppAPI</code>æœ€ç»ˆè¿”å›ä¸€ä¸ª<code>createApp</code>å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨vue3ä¸­è°ƒç”¨çš„<code>createApp(App)</code></p><ul><li>é€šè¿‡<code>const context = createAppContext()</code>åˆ›å»ºå®ä¾‹ä¸Šä¸‹æ–‡ï¼Œå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬åé¢è®²</li><li>æ¥ç€åˆ›å»ºäº†ä¸€ä¸ª<code>app</code>å¯¹è±¡ï¼Œä¸Šé¢æœ‰ä¸€äº›å±æ€§æ–¹æ³•ï¼Œæœ€åå°†å…¶è¿”å›</li><li>åœ¨<code>app.mount</code>æ–¹æ³•ä¸Šï¼Œé€šè¿‡<code>createVNode</code>åˆ›å»ºvnode</li><li>åè°ƒç”¨<code>render</code>æ¥ç”ŸæˆçœŸå®domï¼Œè¿™é‡Œçš„<code>render</code>æ˜¯<code>createAppAPI</code>å‡½æ•°ä¸­ä¼ å…¥çš„ï¼Œé€šè¿‡é—­åŒ…çš„å½¢å¼ä¿å­˜ï¼Œè¿™æ ·åœ¨è°ƒç”¨å®ä¾‹<code>mount</code>æ–¹æ³•æ—¶å°±ä¸ç”¨ä¼ å…¥renderå‡½æ•°äº†</li></ul><h3 id="é‡å†™mountæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#é‡å†™mountæ–¹æ³•" aria-hidden="true">#</a> é‡å†™mountæ–¹æ³•</h3><p>åœ¨åˆ›å»ºä¸€ä¸ªappå®åŠ›åé‡å†™äº†mountæ–¹æ³•</p><blockquote><p>å› ä¸ºæ¸²æŸ“å™¨å’Œåˆ›å»ºappçš„é€»è¾‘åœ¨æ¯ä¸ªå¹³å°ä¸­éƒ½éœ€è¦ï¼Œæ‰€ä»¥è¢«æŠ½å–åœ¨runtime-coreçš„åº“ä¸­ï¼Œè€Œæµè§ˆå™¨ç¯å¢ƒéœ€è¦åˆ›å»ºçœŸå®domï¼Œæ‰€ä»¥è·Ÿdomæœ‰å…³çš„ä»£ç éƒ½åœ¨runtime-domçš„åº“ä¸­ï¼Œæ‰€ä»¥æ¸²æŸ“å™¨éœ€è¦é€šè¿‡é…ç½®ç”Ÿæˆï¼Œè€Œdoméœ€è¦ç‰¹æ®Šæ–¹æ³•æŒ‚è½½</p></blockquote><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> createApp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">ensureRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> mount <span class="token punctuation">}</span> <span class="token operator">=</span> app
  app<span class="token punctuation">.</span>mount <span class="token operator">=</span> <span class="token punctuation">(</span>containerOrSelector<span class="token operator">:</span> Element <span class="token operator">|</span> ShadowRoot <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token function">normalizeContainer</span><span class="token punctuation">(</span>containerOrSelector<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>container<span class="token punctuation">)</span> <span class="token keyword">return</span>

    <span class="token keyword">const</span> component <span class="token operator">=</span> app<span class="token punctuation">.</span>_component
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isFunction</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>component<span class="token punctuation">.</span>render <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>component<span class="token punctuation">.</span>template<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// __UNSAFE__</span>
      <span class="token comment">// Reason: potential execution of JS expressions in in-DOM template.</span>
      <span class="token comment">// The user must make sure the in-DOM template is trusted. If it&#39;s</span>
      <span class="token comment">// rendered by the server, the template should not contain any user data.</span>
      component<span class="token punctuation">.</span>template <span class="token operator">=</span> container<span class="token punctuation">.</span>innerHTML
    <span class="token punctuation">}</span>

    <span class="token comment">// clear content before mounting</span>
    container<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
    <span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> container <span class="token keyword">instanceof</span> <span class="token class-name">SVGElement</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> proxy
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> app
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">as</span> CreateAppFunction<span class="token operator">&lt;</span>Element<span class="token operator">&gt;</span>

<span class="token keyword">function</span> <span class="token function">normalizeContainer</span><span class="token punctuation">(</span>
  container<span class="token operator">:</span> Element <span class="token operator">|</span> ShadowRoot <span class="token operator">|</span> <span class="token builtin">string</span>
<span class="token punctuation">)</span><span class="token operator">:</span> Element <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> res
  <span class="token punctuation">}</span>
 
  <span class="token keyword">return</span> container <span class="token keyword">as</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é¦–å…ˆé€šè¿‡<code>normalizeContainer</code>è·å–åˆ°çœŸå®çš„domï¼Œä¹Ÿå°±æ˜¯æŒ‚åœ¨ç›®æ ‡dom</li><li>è¿™é‡Œ<code>app._component</code>æŒ‡çš„æ˜¯æˆ‘ä»¬åˆ›å»ºappå®ä¾‹ä¼ å…¥çš„ç»„ä»¶ï¼Œä¹‹ååˆ¤æ–­è¯¥ç»„ä»¶å¦‚æœæ²¡æœ‰å®šä¹‰renderæˆ–templateå±æ€§åˆ™æå–æŒ‚è½½å…ƒç´ çš„htmlå†…å®¹</li><li>ä½¿ç”¨appå®ä¾‹åŸå…ˆçš„mountæ–¹æ³•è¿›è¡ŒçœŸå®çš„æŒ‚è½½</li></ul><p>åˆ°è¿™é‡Œä¸€ä¸ªç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢çš„è¿‡ç¨‹ä¹Ÿå°±ç»“æŸäº†ï¼Œåœ¨è¿‡ç¨‹ä¸­è¿˜éœ€è¦ç”Ÿæˆvnodeï¼ˆ<code>createVNode</code>ï¼‰å’Œæ¸²æŸ“vnodeï¼ˆ<code>render</code>ï¼‰çš„æ–¹æ³•æˆ‘ä»¬æ²¡æœ‰è¯´æ˜ï¼Œæ¥ä¸‹æ¥é‡ç‚¹åˆ†æè¿™ä¸¤ä¸ªè¿‡ç¨‹</p><h2 id="åˆ›å»ºvnodeå’Œæ¸²æŸ“vnode" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºvnodeå’Œæ¸²æŸ“vnode" aria-hidden="true">#</a> åˆ›å»ºvnodeå’Œæ¸²æŸ“vnode</h2><h3 id="åˆ›å»ºvnode" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºvnode" aria-hidden="true">#</a> åˆ›å»ºvnode</h3><p>vnodeæ˜¯ç”¨æ¥æè¿°ä¸€ä¸ªçœŸå®domå’Œç»„ä»¶çš„ï¼Œæœ¬è´¨å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸Šé¢æœ‰ä¸€äº›æè¿°å±æ€§ä»¥åŠæ–¹æ³•ï¼Œæˆ‘ä»¬å›åˆ°æ„å»ºappå®ä¾‹çš„åœ°æ–¹åœ¨åŸå§‹çš„mountæ–¹æ³•ä¸­åˆ›å»ºäº†vnode</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createAppAPI</span><span class="token generic class-name"><span class="token operator">&lt;</span>HostElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  render<span class="token operator">:</span> RootRenderFunction<span class="token operator">&lt;</span>HostElement<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  hydrate<span class="token operator">?</span><span class="token operator">:</span> RootHydrateFunction
<span class="token punctuation">)</span><span class="token operator">:</span> CreateAppFunction<span class="token operator">&lt;</span>HostElement<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">createApp</span><span class="token punctuation">(</span>rootComponent<span class="token punctuation">,</span> rootProps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> app<span class="token operator">:</span> App <span class="token operator">=</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>app <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>

      <span class="token function">mount</span><span class="token punctuation">(</span>
        rootContainer<span class="token operator">:</span> HostElement<span class="token punctuation">,</span>
        isHydrate<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
        isSVG<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
      <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isMounted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">createVNode</span><span class="token punctuation">(</span>
            rootComponent <span class="token keyword">as</span> ConcreteComponent<span class="token punctuation">,</span>
            rootProps
          <span class="token punctuation">)</span>
          
          <span class="token comment">// ...</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> app
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>vnodeä¹Ÿæ˜¯vueæ ¸å¿ƒçš„æ€æƒ³ä¹‹ä¸€ï¼Œå› æ­¤ä»£ç ä¹Ÿåœ¨runtime-coreæ ¸å¿ƒåº“ä¸­</p></blockquote><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> createVNode <span class="token operator">=</span> <span class="token punctuation">(</span>
  __DEV__ <span class="token operator">?</span> createVNodeWithArgsTransform <span class="token operator">:</span> _createVNode
<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">typeof</span> _createVNode

<span class="token keyword">function</span> <span class="token function">_createVNode</span><span class="token punctuation">(</span>
  type<span class="token operator">:</span> VNodeTypes <span class="token operator">|</span> ClassComponent <span class="token operator">|</span> <span class="token keyword">typeof</span> <span class="token constant">NULL_DYNAMIC_COMPONENT</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">(</span>Data <span class="token operator">&amp;</span> VNodeProps<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  children<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  patchFlag<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
  dynamicProps<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  isBlockNode <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">)</span><span class="token operator">:</span> VNode <span class="token punctuation">{</span>
  <span class="token comment">// ç»Ÿä¸€ç»„ä»¶ç±»å‹ä»¥åŠå±æ€§classæˆ–style</span>

  <span class="token comment">// encode the vnode type information into a bitmap</span>
  <span class="token keyword">const</span> shapeFlag <span class="token operator">=</span> <span class="token function">isString</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
    <span class="token operator">?</span> <span class="token number">1</span>
    <span class="token operator">:</span> __FEATURE_SUSPENSE__ <span class="token operator">&amp;&amp;</span> <span class="token function">isSuspense</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
    <span class="token operator">?</span> <span class="token number">128</span>
    <span class="token operator">:</span> <span class="token function">isTeleport</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
    <span class="token operator">?</span> <span class="token number">64</span>
    <span class="token operator">:</span> <span class="token function">isObject</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
    <span class="token operator">?</span> <span class="token number">4</span>
    <span class="token operator">:</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
    <span class="token operator">?</span> <span class="token number">2</span>
    <span class="token operator">:</span> <span class="token number">0</span>

  <span class="token keyword">return</span> <span class="token function">createBaseVNode</span><span class="token punctuation">(</span>
    type<span class="token punctuation">,</span>
    props<span class="token punctuation">,</span>
    children<span class="token punctuation">,</span>
    patchFlag<span class="token punctuation">,</span>
    dynamicProps<span class="token punctuation">,</span>
    shapeFlag<span class="token punctuation">,</span>
    isBlockNode<span class="token punctuation">,</span>
    <span class="token boolean">true</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é¦–å…ˆç»Ÿä¸€ç»„ä»¶ç±»å‹å’Œå±æ€§ï¼Œæˆ‘ä»¬è¿™é‡Œä¸ç»†è¯´</li><li>ä¹‹åå¯¹èŠ‚ç‚¹è¿›è¡Œåˆ†ç±»ï¼Œæ¯ä¸€ç§èŠ‚ç‚¹éƒ½å¯¹åº”ä¸€ä¸ªæ•°å­—</li><li>ä¹‹åé€šè¿‡<code>createBaseVNode</code>åˆ›å»ºvnode</li></ul><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">let</span> currentBlock<span class="token operator">:</span> VNode<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span>

<span class="token keyword">function</span> <span class="token function">createBaseVNode</span><span class="token punctuation">(</span>
  type<span class="token operator">:</span> VNodeTypes <span class="token operator">|</span> ClassComponent <span class="token operator">|</span> <span class="token keyword">typeof</span> <span class="token constant">NULL_DYNAMIC_COMPONENT</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">(</span>Data <span class="token operator">&amp;</span> VNodeProps<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  children<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  patchFlag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
  dynamicProps<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  shapeFlag <span class="token operator">=</span> type <span class="token operator">===</span> Fragment <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">ELEMENT</span><span class="token punctuation">,</span>
  isBlockNode <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  needFullChildrenNormalization <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token punctuation">{</span>
    __v_isVNode<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    __v_skip<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    type<span class="token punctuation">,</span>
    props<span class="token punctuation">,</span>
    key<span class="token operator">:</span> props <span class="token operator">&amp;&amp;</span> <span class="token function">normalizeKey</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">,</span>
    ref<span class="token operator">:</span> props <span class="token operator">&amp;&amp;</span> <span class="token function">normalizeRef</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">,</span>
    scopeId<span class="token operator">:</span> currentScopeId<span class="token punctuation">,</span>
    slotScopeIds<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    children<span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    suspense<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    ssContent<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    ssFallback<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    dirs<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    transition<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    el<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    anchor<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    target<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    targetAnchor<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    staticCount<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    shapeFlag<span class="token punctuation">,</span>
    patchFlag<span class="token punctuation">,</span>
    dynamicProps<span class="token punctuation">,</span>
    dynamicChildren<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    appContext<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    ctx<span class="token operator">:</span> currentRenderingInstance
  <span class="token punctuation">}</span> <span class="token keyword">as</span> VNode

  <span class="token keyword">if</span> <span class="token punctuation">(</span>needFullChildrenNormalization<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">normalizeChildren</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> children<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// compiled element vnode - if children is passed, only possible types are</span>
    <span class="token comment">// string or Array.</span>
    vnode<span class="token punctuation">.</span>shapeFlag <span class="token operator">|=</span> <span class="token function">isString</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span>
      <span class="token operator">?</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">TEXT_CHILDREN</span>
      <span class="token operator">:</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">ARRAY_CHILDREN</span>
  <span class="token punctuation">}</span>


  <span class="token comment">// track vnode for block tree</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    isBlockTreeEnabled <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
    <span class="token comment">// avoid a block node from tracking itself</span>
    <span class="token operator">!</span>isBlockNode <span class="token operator">&amp;&amp;</span>
    <span class="token comment">// has current parent block</span>
    currentBlock <span class="token operator">&amp;&amp;</span>
    <span class="token comment">// presence of a patch flag indicates this node needs patching on updates.</span>
    <span class="token comment">// component nodes also should always be patched, because even if the</span>
    <span class="token comment">// component doesn&#39;t need to update, it needs to persist the instance on to</span>
    <span class="token comment">// the next vnode so that it can be properly unmounted later.</span>
    <span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>patchFlag <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">||</span> shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">COMPONENT</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    <span class="token comment">// the EVENTS flag is only for hydration and if it is the only flag, the</span>
    <span class="token comment">// vnode should not be considered dynamic due to handler caching.</span>
    vnode<span class="token punctuation">.</span>patchFlag <span class="token operator">!==</span> PatchFlags<span class="token punctuation">.</span><span class="token constant">HYDRATE_EVENTS</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    currentBlock<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> vnode
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>createBaseVNode</code>å‡½æ•°å°±æ˜¯æœ€ç»ˆç”Ÿæˆvnodeçš„åœ°æ–¹</p><ul><li>é¦–å…ˆåˆ›å»ºäº†vnodeå¯¹è±¡ï¼Œå®šä¹‰äº†ä¸€äº›å±æ€§</li><li><code>normalizeChildren(vnode, children)</code>å¯¹å­å…ƒç´ è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œåªæ˜¯æ ¹æ®å­å…ƒç´ çš„ç±»å‹ä¿®æ”¹å½“å‰vnodeçš„<code>shapeFlag</code>å±æ€§</li><li>åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æ˜¯blockèŠ‚ç‚¹ï¼ˆå°±æ˜¯å†…éƒ¨æ˜¯å¦æœ‰åŠ¨æ€èŠ‚ç‚¹ï¼‰ï¼Œå¹¶è®°å½•</li><li>è¿”å›vnode</li></ul><p>åˆ°è¿™é‡Œå°±å®Œæˆäº†vnodeçš„åˆ›å»ºæµç¨‹ï¼Œæˆ‘ä»¬è·å–åˆ°äº†vnodeï¼Œä¸‹ä¸€æ­¥å°±æŠŠå®ƒæ¸²æŸ“åˆ°é¡µé¢</p><h3 id="æ¸²æŸ“vnode" tabindex="-1"><a class="header-anchor" href="#æ¸²æŸ“vnode" aria-hidden="true">#</a> æ¸²æŸ“vnode</h3><p>æˆ‘ä»¬åœ¨å›åˆ°runtime-coreä¸­appå®ä¾‹ä¸Šçš„mountå‡½æ•°</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createAppAPI</span><span class="token generic class-name"><span class="token operator">&lt;</span>HostElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  render<span class="token operator">:</span> RootRenderFunction<span class="token operator">&lt;</span>HostElement<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  hydrate<span class="token operator">?</span><span class="token operator">:</span> RootHydrateFunction
<span class="token punctuation">)</span><span class="token operator">:</span> CreateAppFunction<span class="token operator">&lt;</span>HostElement<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">createApp</span><span class="token punctuation">(</span>rootComponent<span class="token punctuation">,</span> rootProps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>

    <span class="token keyword">const</span> app<span class="token operator">:</span> App <span class="token operator">=</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>app <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>

      <span class="token function">mount</span><span class="token punctuation">(</span>
        rootContainer<span class="token operator">:</span> HostElement<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isMounted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">createVNode</span><span class="token punctuation">(</span>
            rootComponent <span class="token keyword">as</span> ConcreteComponent<span class="token punctuation">,</span>
            rootProps
          <span class="token punctuation">)</span>
        
          <span class="token function">render</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> rootContainer<span class="token punctuation">)</span>

          <span class="token keyword">return</span> <span class="token function">getExposeProxy</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>component<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token operator">||</span> vnode<span class="token punctuation">.</span>component<span class="token operator">!</span><span class="token punctuation">.</span>proxy
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> app
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬åˆšæ‰ç ”ç©¶äº†å¦‚ä½•è·å–<code>vnode</code>ï¼Œæ¥ä¸‹æ¥é€šè¿‡æ‰§è¡Œ<code>render</code>æ¸²æŸ“<code>vnode</code>ï¼Œ<code>render</code>å‡½æ•°ä¼ å…¥vnodeä»¥åŠæŒ‚è½½å®¹å™¨ï¼Œæ˜¯åˆ›å»ºappApiçš„æ—¶å€™ä¼ å…¥çš„</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">baseCreateRenderer</span><span class="token punctuation">(</span>
  options<span class="token operator">:</span> RendererOptions<span class="token punctuation">,</span>
  createHydrationFns<span class="token operator">?</span><span class="token operator">:</span> <span class="token keyword">typeof</span> createHydrationFunctions
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token keyword">const</span> render<span class="token operator">:</span> <span class="token function-variable function">RootRenderFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> container<span class="token punctuation">,</span> isSVG<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vnode <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">.</span>_vnode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">unmount</span><span class="token punctuation">(</span>container<span class="token punctuation">.</span>_vnode<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">patch</span><span class="token punctuation">(</span>container<span class="token punctuation">.</span>_vnode <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> container<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> isSVG<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">flushPreFlushCbs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">flushPostFlushCbs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    container<span class="token punctuation">.</span>_vnode <span class="token operator">=</span> vnode
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    render<span class="token punctuation">,</span>
    hydrate<span class="token punctuation">,</span>
    createApp<span class="token operator">:</span> <span class="token function">createAppAPI</span><span class="token punctuation">(</span>render<span class="token punctuation">,</span> hydrate<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>render</code>æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼Œå¸è½½å’Œæ¸²æŸ“ï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥vnodeå°±è¿›è¡Œå¸è½½ï¼Œå¦åˆ™é€šè¿‡<code>patch</code>æ¸²æŸ“</p><p><code>patch</code>ä¼šè¿›è¡ŒèŠ‚ç‚¹å¯¹æ¯”ï¼Œæˆ‘ä»¬åœ¨mounté˜¶æ®µä¼ å…¥çš„æ˜¯ä¸€ä¸ªç±»é€‰æ‹©å™¨ï¼Œé€šè¿‡é‡å†™mountå‡½æ•°åä¼ å…¥è¿™é‡Œæ˜¯ä¸€ä¸ªçœŸå®dom</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>  <span class="token comment">// Note: functions inside this closure should use `const xxx = () =&gt; {}`</span>
  <span class="token comment">// style in order to prevent being inlined by minifiers.</span>
  <span class="token keyword">const</span> patch<span class="token operator">:</span> <span class="token function-variable function">PatchFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    n1<span class="token punctuation">,</span>
    n2<span class="token punctuation">,</span>
    container<span class="token punctuation">,</span>
    anchor <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    parentComponent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    parentSuspense <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    isSVG <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    slotScopeIds <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    optimized <span class="token operator">=</span> __DEV__ <span class="token operator">&amp;&amp;</span> isHmrUpdating <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token operator">!</span><span class="token operator">!</span>n2<span class="token punctuation">.</span>dynamicChildren
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n1 <span class="token operator">===</span> n2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å½“æ–°æ—§èŠ‚ç‚¹éƒ½å­˜åœ¨ä¸”ç±»å‹ä¸åŒçš„æ—¶å€™</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n1 <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isSameVNodeType</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      anchor <span class="token operator">=</span> <span class="token function">getNextHostNode</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span>
      <span class="token function">unmount</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> parentComponent<span class="token punctuation">,</span> parentSuspense<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
      n1 <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> shapeFlag <span class="token punctuation">}</span> <span class="token operator">=</span> n2
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> Text<span class="token operator">:</span> <span class="token comment">// å¤„ç†æ–‡æœ¬èŠ‚ç‚¹</span>
      <span class="token keyword">case</span> Comment<span class="token operator">:</span> <span class="token comment">// å¤„ç†æ³¨é‡ŠèŠ‚ç‚¹</span>
      <span class="token keyword">case</span> Static<span class="token operator">:</span> <span class="token comment">// å¤„ç†é™æ€èŠ‚ç‚¹</span>
      <span class="token keyword">case</span> Fragment<span class="token operator">:</span> <span class="token comment">// å¤„ç†Fragmentå…ƒç´ </span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">ELEMENT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// å¤„ç†domå…ƒç´ </span>
          <span class="token function">processElement</span><span class="token punctuation">(</span>
            n1<span class="token punctuation">,</span>
            n2<span class="token punctuation">,</span>
            container<span class="token punctuation">,</span>
            anchor<span class="token punctuation">,</span>
            parentComponent<span class="token punctuation">,</span>
            parentSuspense<span class="token punctuation">,</span>
            isSVG<span class="token punctuation">,</span>
            slotScopeIds<span class="token punctuation">,</span>
            optimized
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">COMPONENT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// å¤„ç†ç»„ä»¶</span>
          <span class="token function">processComponent</span><span class="token punctuation">(</span>
            n1<span class="token punctuation">,</span>
            n2<span class="token punctuation">,</span>
            container<span class="token punctuation">,</span>
            anchor<span class="token punctuation">,</span>
            parentComponent<span class="token punctuation">,</span>
            parentSuspense<span class="token punctuation">,</span>
            isSVG<span class="token punctuation">,</span>
            slotScopeIds<span class="token punctuation">,</span>
            optimized
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">TELEPORT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// å¤„ç†TELEPORTç»„ä»¶</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>__FEATURE_SUSPENSE__ <span class="token operator">&amp;&amp;</span> shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">SUSPENSE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// å¤„ç†SUSPENSEç»„ä»¶</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>patch</code>å‡½æ•°æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼Œä¸€ä¸ªæ˜¯æ ¹æ®vnodeæŒ‚è½½domï¼Œä¸€ä¸ªæ˜¯æ ¹æ®æ–°æ—§vnodeæ›´æ–°dom</p><p>å½“<code>n1</code>ä¸ºnullæ—¶ï¼Œå½“å‰åº”è¯¥æ‰§è¡ŒæŒ‚è½½æ“ä½œã€‚å½“n2è¡¨ç¤ºæ–°èŠ‚ç‚¹æ—¶ï¼Œä¼šæ ¹æ®èŠ‚ç‚¹ç±»å‹åšä¸åŒæ›´æ–°å¤„ç†ã€‚<code>container</code>å‚æ•°è¡¨ç¤ºæŒ‚è½½å®¹å™¨</p><p>æˆ‘ä»¬è¿™é‡Œé‡ç‚¹å…³æ³¨å¤„ç†domå…ƒç´ å’Œç»„ä»¶çš„é€»è¾‘</p><h4 id="å¤„ç†ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#å¤„ç†ç»„ä»¶" aria-hidden="true">#</a> å¤„ç†ç»„ä»¶</h4><p>ç»„ä»¶å¤„ç†è°ƒç”¨äº†<code>processComponent</code>å‡½æ•°</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token function-variable function">processComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    n1<span class="token operator">:</span> VNode <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    n2<span class="token operator">:</span> VNode<span class="token punctuation">,</span>
    container<span class="token operator">:</span> RendererElement<span class="token punctuation">,</span>
    anchor<span class="token operator">:</span> RendererNode <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    parentComponent<span class="token operator">:</span> ComponentInternalInstance <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    parentSuspense<span class="token operator">:</span> SuspenseBoundary <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    isSVG<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
    slotScopeIds<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    optimized<span class="token operator">:</span> <span class="token builtin">boolean</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    n2<span class="token punctuation">.</span>slotScopeIds <span class="token operator">=</span> slotScopeIds
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n1 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>n2<span class="token punctuation">.</span>shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">COMPONENT_KEPT_ALIVE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">;</span><span class="token punctuation">(</span>parentComponent<span class="token operator">!</span><span class="token punctuation">.</span>ctx <span class="token keyword">as</span> KeepAliveContext<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">activate</span><span class="token punctuation">(</span>
          n2<span class="token punctuation">,</span>
          container<span class="token punctuation">,</span>
          anchor<span class="token punctuation">,</span>
          isSVG<span class="token punctuation">,</span>
          optimized
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">mountComponent</span><span class="token punctuation">(</span>
          n2<span class="token punctuation">,</span>
          container<span class="token punctuation">,</span>
          anchor<span class="token punctuation">,</span>
          parentComponent<span class="token punctuation">,</span>
          parentSuspense<span class="token punctuation">,</span>
          isSVG<span class="token punctuation">,</span>
          optimized
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">updateComponent</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">,</span> optimized<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>processComponent</code>å‡½æ•°é€šè¿‡åˆ¤æ–­å¤„ç†æŒ‚è½½ã€æ›´æ–°ä»¥åŠkeepâ€”aliveçš„æƒ…å†µï¼Œæˆ‘ä»¬è¿™é‡Œå…ˆå…³æ³¨æŒ‚è½½</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> mountComponent<span class="token operator">:</span> <span class="token function-variable function">MountComponentFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    initialVNode<span class="token punctuation">,</span>
    container<span class="token punctuation">,</span>
    anchor<span class="token punctuation">,</span>
    parentComponent<span class="token punctuation">,</span>
    parentSuspense<span class="token punctuation">,</span>
    isSVG<span class="token punctuation">,</span>
    optimized
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> instance<span class="token operator">:</span> ComponentInternalInstance <span class="token operator">=</span> <span class="token punctuation">(</span>initialVNode<span class="token punctuation">.</span>component <span class="token operator">=</span> <span class="token function">createComponentInstance</span><span class="token punctuation">(</span>
      initialVNode<span class="token punctuation">,</span>
      parentComponent<span class="token punctuation">,</span>
      parentSuspense
    <span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token function">setupComponent</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span>

    <span class="token function">setupRenderEffect</span><span class="token punctuation">(</span>
      instance<span class="token punctuation">,</span>
      initialVNode<span class="token punctuation">,</span>
      container<span class="token punctuation">,</span>
      anchor<span class="token punctuation">,</span>
      parentSuspense<span class="token punctuation">,</span>
      isSVG<span class="token punctuation">,</span>
      optimized
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŒ‚è½½ç»„ä»¶å‡½æ•°çš„é‡è¦é€»è¾‘æœ‰ä¸‰ä¸ªï¼Œä¸€ä¸ªæ˜¯è·å–ç»„ä»¶å®ä¾‹<code>instance</code>ï¼Œä¸€ä¸ªæ˜¯è®¾ç½®ç»„ä»¶å®ä¾‹ï¼Œæœ€åæ˜¯è®¾ç½®å¹¶è¿è¡Œå¸¦å‰¯ä½œç”¨çš„æ¸²æŸ“å‡½æ•°<code>setupRenderEffect</code></p><p><code>instance</code>æœ¬è´¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸Šé¢è®°å½•ä¸€äº›ç»„ä»¶çš„å±æ€§ï¼Œå…·ä½“ç»†èŠ‚æˆ‘ä»¬ä¹‹åè¯¦ç»†è¯´æ˜</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> setupRenderEffect<span class="token operator">:</span> <span class="token function-variable function">SetupRenderEffectFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    instance<span class="token punctuation">,</span>
    initialVNode<span class="token punctuation">,</span>
    container<span class="token punctuation">,</span>
    anchor<span class="token punctuation">,</span>
    parentSuspense<span class="token punctuation">,</span>
    isSVG<span class="token punctuation">,</span>
    optimized
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">componentUpdateFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">.</span>isMounted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> subTree <span class="token operator">=</span> <span class="token punctuation">(</span>instance<span class="token punctuation">.</span>subTree <span class="token operator">=</span> <span class="token function">renderComponentRoot</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">)</span>
      
        <span class="token function">patch</span><span class="token punctuation">(</span>
          <span class="token keyword">null</span><span class="token punctuation">,</span>
          subTree<span class="token punctuation">,</span>
          container<span class="token punctuation">,</span>
          anchor<span class="token punctuation">,</span>
          instance<span class="token punctuation">,</span>
          parentSuspense<span class="token punctuation">,</span>
          isSVG
        <span class="token punctuation">)</span>

        initialVNode<span class="token punctuation">.</span>el <span class="token operator">=</span> subTree<span class="token punctuation">.</span>el
        instance<span class="token punctuation">.</span>isMounted <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ›´æ–°æ¸²æŸ“</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// create reactive effect for rendering</span>
    <span class="token keyword">const</span> effect <span class="token operator">=</span> <span class="token punctuation">(</span>instance<span class="token punctuation">.</span>effect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReactiveEffect</span><span class="token punctuation">(</span>
      componentUpdateFn<span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">queueJob</span><span class="token punctuation">(</span>update<span class="token punctuation">)</span><span class="token punctuation">,</span>
      instance<span class="token punctuation">.</span>scope <span class="token comment">// track it in component&#39;s effect scope</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> update<span class="token operator">:</span> SchedulerJob <span class="token operator">=</span> <span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> effect<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é¦–å…ˆå£°æ˜<code>componentUpdateFn</code>å‡½æ•°</li><li><code>ReactiveEffect</code>æ„å»ºä¸€ä¸ªå‰¯ä½œç”¨å®ä¾‹<code>effect</code>ï¼Œæš‚æ—¶ç†è§£æˆå½“ç»„ä»¶æ•°æ®å˜åŒ–ï¼Œä¼šè§¦å‘<code>componentUpdateFn</code>å‡½æ•°</li><li>åˆ›å»ºä¸€ä¸ª<code>update</code>å‡½æ•°</li><li>è°ƒç”¨<code>update</code>å‡½æ•°ï¼Œå®é™…æ˜¯è°ƒç”¨<code>effect.run</code>ï¼Œæœ€ç»ˆè°ƒç”¨<code>componentUpdateFn</code>å‡½æ•°ï¼Œå‡½æ•°å†…åšäº†ä¸‰ä»¶äº‹ <ul><li>åˆ›å»ºå­æ ‘</li><li>é€’å½’å¯¹æ¯”å­æ ‘</li><li>å°†å­æ ‘çš„è·Ÿå…ƒç´ èµ‹å€¼ä¸éœ€è¦æŒ‚è½½çš„vnodeï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬cereateAppä¼ å…¥çš„ç»„ä»¶</li></ul></li></ul><p>æ¯ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ªrenderå‡½æ•°ï¼ˆå¦‚æœä½ å†™templateæœ€ç»ˆä¹Ÿä¼šè½¬åŒ–æˆrenderå‡½æ•°ï¼‰ï¼Œ<code>renderComponentRoot</code>å‡½æ•°å°†æ‰§è¡Œrenderå‡½æ•°ï¼Œå°†å†…éƒ¨çš„èŠ‚ç‚¹éƒ½è½¬åŒ–ä¸ºvnodeå¹¶ä¸”å½¢æˆä¾èµ–å…³ç³»ï¼Œä¹Ÿå°±æ˜¯<code>subTree</code>ï¼Œä¹‹åé€’å½’è°ƒç”¨<code>patch</code>å°†<code>subTree</code>ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹æŒ‚è½½åˆ°å®¹å™¨<code>container</code>ä¸Š</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- app.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¾‹å¦‚æˆ‘ä»¬æŒ‚è½½çš„ç»„ä»¶App.vueå†…éƒ¨ç»“æ„æ˜¯è¿™æ ·çš„ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥é€’å½’<code>patch</code>å‡½æ•°å°†å¼€å§‹å¤„ç†çœŸå®domäº†</p><h4 id="å¤„ç†dom" tabindex="-1"><a class="header-anchor" href="#å¤„ç†dom" aria-hidden="true">#</a> å¤„ç†dom</h4><p><code>patch</code>ä¸­å¤„ç†domçš„å‡½æ•°æ˜¯<code>processElement</code></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>  <span class="token keyword">const</span> <span class="token function-variable function">processElement</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    n1<span class="token operator">:</span> VNode <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    n2<span class="token operator">:</span> VNode<span class="token punctuation">,</span>
    container<span class="token operator">:</span> RendererElement<span class="token punctuation">,</span>
    anchor<span class="token operator">:</span> RendererNode <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    parentComponent<span class="token operator">:</span> ComponentInternalInstance <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    parentSuspense<span class="token operator">:</span> SuspenseBoundary <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    isSVG<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
    slotScopeIds<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    optimized<span class="token operator">:</span> <span class="token builtin">boolean</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    isSVG <span class="token operator">=</span> isSVG <span class="token operator">||</span> <span class="token punctuation">(</span>n2<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token class-name"><span class="token keyword">as</span></span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;svg&#39;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n1 <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">mountElement</span><span class="token punctuation">(</span>
        n2<span class="token punctuation">,</span>
        container<span class="token punctuation">,</span>
        anchor<span class="token punctuation">,</span>
        parentComponent<span class="token punctuation">,</span>
        parentSuspense<span class="token punctuation">,</span>
        isSVG<span class="token punctuation">,</span>
        slotScopeIds<span class="token punctuation">,</span>
        optimized
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">patchElement</span><span class="token punctuation">(</span>
        n1<span class="token punctuation">,</span>
        n2<span class="token punctuation">,</span>
        parentComponent<span class="token punctuation">,</span>
        parentSuspense<span class="token punctuation">,</span>
        isSVG<span class="token punctuation">,</span>
        slotScopeIds<span class="token punctuation">,</span>
        optimized
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å’Œ<code>mountComponent</code>é€»è¾‘ç±»ä¼¼ï¼Œ<code>n1</code>ä¸ºnullåˆ™æŒ‚è½½</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>  <span class="token keyword">const</span> <span class="token function-variable function">mountElement</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    vnode<span class="token operator">:</span> VNode<span class="token punctuation">,</span>
    container<span class="token operator">:</span> RendererElement<span class="token punctuation">,</span>
    anchor<span class="token operator">:</span> RendererNode <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    parentComponent<span class="token operator">:</span> ComponentInternalInstance <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    parentSuspense<span class="token operator">:</span> SuspenseBoundary <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    isSVG<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
    slotScopeIds<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    optimized<span class="token operator">:</span> <span class="token builtin">boolean</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> el<span class="token operator">:</span> RendererElement
    <span class="token keyword">let</span> vnodeHook<span class="token operator">:</span> VNodeHook <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> <span class="token keyword">null</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> props<span class="token punctuation">,</span> shapeFlag<span class="token punctuation">,</span> transition<span class="token punctuation">,</span> dirs <span class="token punctuation">}</span> <span class="token operator">=</span> vnode

    el <span class="token operator">=</span> vnode<span class="token punctuation">.</span>el <span class="token operator">=</span> <span class="token function">hostCreateElement</span><span class="token punctuation">(</span>
      vnode<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token class-name"><span class="token keyword">as</span></span> <span class="token builtin">string</span><span class="token punctuation">,</span>
      isSVG<span class="token punctuation">,</span>
      props <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span><span class="token keyword">is</span><span class="token punctuation">,</span>
      props
    <span class="token punctuation">)</span>

    <span class="token comment">// mount children first, since some props may rely on child content</span>
    <span class="token comment">// being already rendered, e.g. `&lt;select value&gt;`</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">TEXT_CHILDREN</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">hostSetElementText</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>children <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>shapeFlag <span class="token operator">&amp;</span> ShapeFlags<span class="token punctuation">.</span><span class="token constant">ARRAY_CHILDREN</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">mountChildren</span><span class="token punctuation">(</span>
        vnode<span class="token punctuation">.</span>children <span class="token keyword">as</span> VNodeArrayChildren<span class="token punctuation">,</span>
        el<span class="token punctuation">,</span>
        <span class="token keyword">null</span><span class="token punctuation">,</span>
        parentComponent<span class="token punctuation">,</span>
        parentSuspense<span class="token punctuation">,</span>
        isSVG <span class="token operator">&amp;&amp;</span> type <span class="token operator">!==</span> <span class="token string">&#39;foreignObject&#39;</span><span class="token punctuation">,</span>
        slotScopeIds<span class="token punctuation">,</span>
        optimized
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>dirs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">invokeDirectiveHook</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> parentComponent<span class="token punctuation">,</span> <span class="token string">&#39;created&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// props</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>dirs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">invokeDirectiveHook</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> parentComponent<span class="token punctuation">,</span> <span class="token string">&#39;beforeMount&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
   
    <span class="token function">hostInsert</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é€šè¿‡<code>hostCreateElement</code>åˆ›å»ºçœŸå®dom</li><li>å¦‚æœå­vnodeæ˜¯æ–‡æœ¬åˆ™é€šè¿‡<code>hostSetElementText</code>åˆ›å»ºæ–‡æœ¬dom</li><li>å¦‚æœå­vnodeæ˜¯æ•°ç»„åˆ™é€šè¿‡<code>mountChildren</code>å¤„ç†</li><li>è§¦å‘ç”Ÿå‘½å‘¨æœŸ<code>created</code></li><li>å¤„ç†propsç›¸å…³</li><li>è§¦å‘ç”Ÿå‘½å‘¨æœŸ<code>beforeMount</code></li><li>é€šè¿‡<code>hostInsert</code>å°†domæ’å…¥åˆ°å®¹å™¨ä¸Š</li></ul><blockquote><p><code>hostCreateElement</code>å’Œ<code>hostInsert</code>å‡½æ•°éƒ½æ˜¯åœ¨åˆ›å»ºæ¸²æŸ“å™¨çš„æ—¶å€™é€šè¿‡é…ç½®ä¼ è¿›æ¥çš„ï¼Œåœ¨runtime-domä¸­ï¼Œæœ¬è´¨æ˜¯è°ƒç”¨åº•å±‚DomAPIè¿›è¡Œæ“ä½œdomçš„ï¼Œè¿™ä¹ˆåšçš„åŸå› ä»ç„¶æ˜¯ä¸ºäº†å…¼å®¹å„ä¸ªå¹³å°å°†webå¹³å°çš„ç‰¹æ€§æŠ½ç¦»å‡ºå»</p></blockquote><p>æˆ‘ä»¬çœ‹ä¸‹å¦‚ä½•å¤„ç†å­vnode</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> mountChildren<span class="token operator">:</span> <span class="token function-variable function">MountChildrenFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    children<span class="token punctuation">,</span>
    container<span class="token punctuation">,</span>
    anchor<span class="token punctuation">,</span>
    parentComponent<span class="token punctuation">,</span>
    parentSuspense<span class="token punctuation">,</span>
    isSVG<span class="token punctuation">,</span>
    slotScopeIds<span class="token punctuation">,</span>
    optimized<span class="token punctuation">,</span>
    start <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token punctuation">(</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> optimized
        <span class="token operator">?</span> <span class="token function">cloneIfMounted</span><span class="token punctuation">(</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">as</span> VNode<span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token function">patch</span><span class="token punctuation">(</span>
        <span class="token keyword">null</span><span class="token punctuation">,</span>
        child<span class="token punctuation">,</span>
        container<span class="token punctuation">,</span>
        anchor<span class="token punctuation">,</span>
        parentComponent<span class="token punctuation">,</span>
        parentSuspense<span class="token punctuation">,</span>
        isSVG<span class="token punctuation">,</span>
        slotScopeIds<span class="token punctuation">,</span>
        optimized
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°éå†å­vnodeå¹¶é‡æ–°è°ƒç”¨<code>patch</code>é€’å½’ï¼Œåªä¸è¿‡å®¹å™¨å˜æˆä»–ä»¬çš„çˆ¶å…ƒç´ äº†</p><p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨mounté˜¶æ®µè°ƒç”¨<code>render</code>åï¼Œå°†æ ¹vnodeçš„å­èŠ‚ç‚¹å…¨éƒ¨è§£ææˆvnodeæ ¼å¼ï¼Œå½¢æˆvnodeæ ‘ï¼Œé€šè¿‡<code>patch</code>è¿›è¡ŒæŒ‚è½½ï¼Œç°å°†æ ¹vnodeæ„å»ºæˆæ ¹å…ƒç´ ï¼ˆçœŸå®domï¼‰ï¼Œåœ¨å¤„ç†å…¶å­vnodeï¼Œé€šè¿‡<code>patch</code>é€’å½’å­vnodeå°†åˆ›å»ºå­å…ƒç´ å¹¶æŒ‚è½½è‡³çˆ¶å…ƒç´ å†…ï¼Œæœ€åå°†æ ¹å…ƒç´ æŒ‚è½½åˆ°mountå‡½æ•°ä¼ å…¥çš„å®¹å™¨ä¸­</p><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>æˆ‘ä»¬ç ”ç©¶äº†å½“è°ƒç”¨createAppçš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆè¿”å›appå®ä¾‹ï¼Œè€Œè°ƒç”¨app.mountçš„æ—¶å€™ä¼šå°†æŒ‚è½½ç»„ä»¶è½¬åŒ–ä¸ºvnodeæ ‘ï¼Œåœ¨æ ¹æ®æ ¹vnodeåˆ›å»ºæ ¹å…ƒç´ ï¼Œåœ¨é€’å½’å­vnodeæŒ‚è½½çˆ¶å…ƒç´ ï¼Œæœ€ç»ˆå°†æ ¹å…ƒç´ æŒ‚è½½åˆ°å®¹å™¨ä¸Šï¼Œè¿™é‡Œæœ‰ä¸ªå›¾èƒ½æ›´å¥½çš„å¸®åŠ©æˆ‘ä»¬ç†è§£</p><p><img src="/assets/mount.41beeec2.png" alt="Alt text"></p></div><!----><footer class="page-meta"><!----><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: marx10086@gmail.com">marx</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/vue3%E6%BA%90%E7%A0%81/" class="nav-link active prev" aria-label="é¦–é¡µ"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->é¦–é¡µ</div></a><a href="/vue3%E6%BA%90%E7%A0%81/2.diff%E6%B5%81%E7%A8%8B.html" class="nav-link next" aria-label="diffæµç¨‹ï¼ˆç»„ä»¶æ›´æ–°ï¼‰"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">diffæµç¨‹ï¼ˆç»„ä»¶æ›´æ–°ï¼‰<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.9ac9284b.js" defer></script>
  </body>
</html>
