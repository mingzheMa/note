# TSConfigé…ç½®

ä¸å¯¹é…ç½®é¡¹åšè¿‡å¤šè§£è¯»ï¼Œåªæ˜¯æ–¹ä¾¿ä¸ªäººç†è§£ï¼Œå°†é…ç½®åˆ†ä¸ºä¸‰å¤§ç±»ï¼š**æ„å»ºç›¸å…³ã€ç±»å‹æ£€æŸ¥ç›¸å…³ã€å·¥ç¨‹ç›¸å…³**

## æ„å»ºç›¸å…³

ä»¥ä¸‹æ˜¯æ„å»ºç›¸å…³é…ç½®

## experimentalDecoratorsã€emitDecoratorMetadata

å¯ç”¨è£…é¥°å™¨<code>@</code>è¯­æ³•

## jsxã€jsxFactoryã€jsxFragmentFactoryã€jsxImportSource

ç”¨æ¥è§£æJSXï¼ˆTSXï¼‰è¯­æ³•ï¼Œ**jsx**é…ç½®å¯ä»¥é€‰æ‹©JSXï¼ˆTSXï¼‰çš„è¾“å‡ºæ ¼å¼
- <code>react</code>ï¼Œå°†JSXè½¬åŒ–æˆ<code>React.createElement</code>çš„æ ¼å¼ï¼Œè¾“å‡ºjsæ–‡ä»¶
- <code>preserve</code>ï¼Œä¿ç•™JSXæ ¼å¼ï¼Œå°†ç”Ÿæˆjsxæ–‡ä»¶ï¼ˆå¦‚æœä½¿ç”¨äº†TSXï¼Œè¿™é‡Œå¯ä»¥è½¬åŒ–æˆJSXï¼Œåç»­äº¤ç»™å…¶ä»–loaderå¤„ç†ï¼‰
- <code>react-jsx</code>ï¼Œreact-jsxæ–¹æ³•æ„å»º
- <code>react-native</code>ï¼Œreact-nativeæ–¹æ³•æ„å»º

```jsx
// æºæ–‡ä»¶
<div>aaa</div>;

// preserve
"use strict";
<div>aaa</div>;

// react
"use strict";
React.createElement("div", null, "aaa");

// react-jsx
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
(0, jsx_runtime_1.jsx)("div", { children: "aaa" });

// react-native
"use strict";
<div>aaa</div>;
```

## targetã€libã€noLib

**target**è¡¨ç¤ºè¾“å‡ºjsä»£ç çš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼šES5ã€ES2015ã€ES2016ç­‰ï¼Œå¦‚æœä½ çš„ä»£ç é«˜äºè®¾å®šç‰ˆæœ¬åˆ™ä¼šå¯¹ä»£ç è¯­æ³•é™çº§å¤„ç†ï¼Œå¦‚æœä½¿ç”¨äº†æ¯”é…ç½®æ›´é«˜çš„æ–¹æ³•ï¼Œåˆ™ä¼šæŠ¥é”™

```ts
"110011100".replaceAll("0", "a") // æŠ¥é”™ï¼šå±æ€§â€œreplaceAllâ€åœ¨ç±»å‹â€œ"110011100"â€ä¸Šä¸å­˜åœ¨ã€‚æ˜¯å¦éœ€è¦æ›´æ”¹ç›®æ ‡åº“? è¯·å°è¯•å°† â€œlibâ€ ç¼–è¯‘å™¨é€‰é¡¹æ›´æ”¹ä¸ºâ€œes2021â€æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ts(2550)
```

**lib**å’Œ**target**æ–¹æ³•ç±»ä¼¼éœ€è¦ä»¥æ•°ç»„å½¢å¼é…ç½®ï¼Œåœ¨ä½¿ç”¨TSçš„é¡¹ç›®ä¼šè‡ªåŠ¨å¼•å…¥<code>lib.d.ts</code>å…¨å±€å£°æ˜ç±»å‹æ–‡ä»¶ï¼Œå¦‚æœé…ç½®äº†<code>lib: ["es2021"]</code>ï¼Œåˆ™ä¼šè‡ªåŠ¨å¼•å…¥<code>lib.es2021.d.ts</code>æ–‡ä»¶ï¼Œä»è€Œæ”¯æŒes2021çš„æ–¹æ³•

**lib**å’Œ**target**å¯ä»¥åŒæ—¶é…ç½®ï¼Œå½“**target**é…ç½®çš„è¯­æ³•ç‰ˆæœ¬æ›´é«˜ï¼Œåˆ™ä¼šè‡ªåŠ¨çš„åŠ å…¥åˆ°**lib**é…ç½®ä¸­ã€‚**noLib**åˆ™æ˜¯é€†å‘çš„**lib**é…ç½®

## filesã€includeã€exclude

è¿™ä¸‰ä¸ªé…ç½®ç¡®å®šç¼–è¯‘çš„æ–‡ä»¶å’Œæ–‡ä»¶èŒƒå›´ï¼Œçœ‹ä¸‹ä½¿ç”¨æ–¹å¼

```json
{
  "compilerOptions": {},
  "files": [
    "src/index.ts",
    "src/handler.ts"
  ],
  "include": ["src/**/*", "generated/*.ts", "internal/*"],
  "exclude": ["src/file-excluded", "/**/*.test.ts", "/**/*.e2e.ts"]
}
```

- **files**æ˜¯é…ç½®éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶ï¼Œéœ€è¦å…·ä½“è·¯å¾„ï¼Œä¸èƒ½ä½¿ç”¨<code>src/\*\*/\*</code>
- **include**æ˜¯é…ç½®éœ€è¦ç¼–è¯‘æ–‡ä»¶æˆ–æ–‡ä»¶èŒƒå›´ã€‚<code>src/\*\*/\*</code>ç¼–è¯‘srcç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚<code>internal/\*</code>åªä¼šç¼–è¯‘internalç›®å½•ä¸‹ä¸€å±‚çš„æ–‡ä»¶ï¼Œä¸ä¼šè¿›è¡Œæ·±å±‚ç¼–è¯‘
- **exclude**ä½œç”¨ä¸**include**ç›¸åï¼Œä¸éœ€è¦ç¼–è¯‘å“ªäº›æ–‡ä»¶

## baseUrl

**baseUrl**é…ç½®æ–‡ä»¶è§£æçš„æ ¹ç›®å½•ï¼Œæ˜¯ä¸€ä¸ªç›¸å¯¹äºtsconfig.jsonæ–‡ä»¶çš„è·¯å¾„

ä¾‹å¦‚æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•å¦‚ä¸‹

```txt
project
â”œâ”€â”€ a.ts
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ b.ts
â””â”€â”€ tsconfig.json
```

å¦‚æœå½“å‰é…ç½®äº†<code>baseUrl: "./"</code>ï¼Œé‚£ä¹ˆæ ¹ç›®å½•å°±ä¼šè®¤å®šä¸ºprojectï¼ŒåŒæ—¶ä¹Ÿä¼šå½±å“åˆ°å¯¼å…¥è·¯å¾„ï¼Œæ¯”å¦‚åœ¨a.tsä¸­

```ts
import "src/b"
```

å¯¼å…¥è·¯å¾„å°±ä¼šè§£ææˆ<code>project/src/b</code>

## rootDir

é…ç½®ç¼–è¯‘é¡¹ç›®æ–‡ä»¶çš„æ ¹ç›®å½•ï¼Œé»˜è®¤ä¸ºé¡¹ç›®å†…åŒ…å«æ‰€æœ‰.tsæ–‡ä»¶æœ€é•¿å…¬å…±è·¯å¾„
- è¿™é‡ŒåŒ…å«çš„æ‰€æœ‰.tsæ–‡ä»¶æ˜¯é€šè¿‡**include**æˆ–**files**é…ç½®ç­›é€‰åçš„æ–‡ä»¶ 
- ä¸åŒ…æ‹¬.d.tsæ–‡ä»¶

ä¸¾ä¸ªä¾‹å­è¯´æ˜ä»€ä¹ˆæ˜¯.tsæ–‡ä»¶æœ€é•¿å…¬å…±è·¯å¾„

```txt
project
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ b.ts
â”‚   â”œâ”€â”€ utils
â”‚   â”‚   â”œâ”€â”€ a.ts
â”œâ”€â”€ env.d.ts
â””â”€â”€ tsconfig.json
```

è¿™ä¸ªä¾‹å­çš„.tsæ–‡ä»¶æœ€é•¿å…¬å…±è·¯å¾„å°±æ˜¯srcï¼Œæ„å»ºç»“æœä¼šå—**rootDir**é…ç½®å½±å“ï¼Œå¦‚æœé…ç½®äº†<code>outDir: "./dist"</code>

```txt
project
â”œâ”€â”€ dist
â”‚   â”œâ”€â”€ b.js
â”‚   â”œâ”€â”€ b.d.js
â”‚   â”œâ”€â”€ utils
â”‚   â”‚   â”œâ”€â”€ a.js
â”‚   â”‚   â”œâ”€â”€ a.d.js
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ b.ts
â”‚   â”œâ”€â”€ utils
â”‚   â”‚   â”œâ”€â”€ a.ts
â”œâ”€â”€ env.d.ts
â””â”€â”€ tsconfig.json
```

distç›®å½•ä¸‹çš„ç»“æ„ä¼šå’Œsrcç›®å½•ç»“æ„ä¿æŒä¸€è‡´ï¼Œå¦‚æœæ‰‹åŠ¨é…ç½®äº†<code>rootDir: "./"</code>

```txt
project
â”œâ”€â”€ dist
â”œâ”€â”€ â”œâ”€â”€ src
â”‚   â”‚   â”œâ”€â”€ b.js
â”‚   â”‚   â”œâ”€â”€ b.d.js
â”‚   â”‚   â”œâ”€â”€ utils
â”‚   â”‚   â”‚   â”œâ”€â”€ a.js
â”‚   â”‚   â”‚   â”œâ”€â”€ a.d.js
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ b.ts
â”‚   â”œâ”€â”€ utils
â”‚   â”‚   â”œâ”€â”€ a.ts
â”œâ”€â”€ env.d.ts
â””â”€â”€ tsconfig.json
```

åˆ™ä¼šdistç›®å½•ç»“æ„å’Œprojectç›®å½•ç»“æ„ä¿æŒä¸€è‡´ï¼Œå¦‚æœé…ç½®äº†<code>rootDir: "./src"</code>ï¼Œå¹¶ä¸”projectç›®å½•ä¸‹æœ‰ä¸€ä¸ªxxx.tsæ–‡ä»¶

```txt
project
â”œâ”€â”€ dist
â”‚   â”œâ”€â”€ b.js
â”‚   â”œâ”€â”€ b.d.js
â”‚   â”œâ”€â”€ utils
â”‚   â”‚   â”œâ”€â”€ a.js
â”‚   â”‚   â”œâ”€â”€ a.d.js
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ b.ts
â”‚   â”œâ”€â”€ utils
â”‚   â”‚   â”œâ”€â”€ a.ts
â”œâ”€â”€ xxx.js
â”œâ”€â”€ xxx.d.js
â”œâ”€â”€ xxx.ts
â”œâ”€â”€ env.d.ts
â””â”€â”€ tsconfig.json
```

xxx.tsæ–‡ä»¶çš„ç¼–è¯‘ç»“æœä¼šå‡ºç°åœ¨projectç›®å½•ä¸‹ï¼Œè€Œédistç›®å½•

## rootDirs

**rootDirs**ç›¸å½“äºé…ç½®å¤šä¸ª**rootDir**ï¼Œæ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œå°†è¿™äº›ç›®å½•è§†ä¸ºå¹³çº§çš„æ ¹ç›®å½•ï¼Œä¾‹å¦‚æˆ‘çš„é¡¹ç›®ç›®å½•å¦‚ä¸‹

```txt
project
â”œâ”€â”€ a
â”‚   â”œâ”€â”€ text1.ts
â”‚   â”œâ”€â”€ text2.ts
â”‚   â”œâ”€â”€ text3.ts
â”œâ”€â”€ b
â”‚   â”œâ”€â”€ text4.ts
â”‚   â”œâ”€â”€ text5.ts
â”‚   â”œâ”€â”€ text6.ts
â””â”€â”€ tsconfig.json
```

æ­¤æ—¶**rootDir**ä¼šé»˜è®¤ä¸ºprojectç›®å½•ï¼Œåˆ™æ‰“åŒ…ç»“æœä¸º

```txt
project
â”œâ”€â”€ dist
â”‚   â”œâ”€â”€ a
â”‚   â”‚   â”œâ”€â”€ text1.ts
â”‚   â”‚   â”œâ”€â”€ text2.ts
â”‚   â”‚   â”œâ”€â”€ text3.ts
â”‚   â”œâ”€â”€ b
â”‚   â”‚   â”œâ”€â”€ text4.ts
â”‚   â”‚   â”œâ”€â”€ text5.ts
â”‚   â”‚   â”œâ”€â”€ text6.ts
â”œâ”€â”€ a
â”‚   â”œâ”€â”€ text1.ts
â”‚   â”œâ”€â”€ text2.ts
â”‚   â”œâ”€â”€ text3.ts
â”œâ”€â”€ b
â”‚   â”œâ”€â”€ text4.ts
â”‚   â”œâ”€â”€ text5.ts
â”‚   â”œâ”€â”€ text6.ts
â””â”€â”€ tsconfig.json
```

å¦‚æœæˆ‘ä»¬é…ç½®<code>rootDirs: ["./a", "./b"]</code>

```txt
project
â”œâ”€â”€ dist
â”‚   â”œâ”€â”€ text1.ts
â”‚   â”œâ”€â”€ text2.ts
â”‚   â”œâ”€â”€ text3.ts
â”‚   â”œâ”€â”€ text4.ts
â”‚   â”œâ”€â”€ text5.ts
â”‚   â”œâ”€â”€ text6.ts
â”œâ”€â”€ a
â”‚   â”œâ”€â”€ text1.ts
â”‚   â”œâ”€â”€ text2.ts
â”‚   â”œâ”€â”€ text3.ts
â”œâ”€â”€ b
â”‚   â”œâ”€â”€ text4.ts
â”‚   â”œâ”€â”€ text5.ts
â”‚   â”œâ”€â”€ text6.ts
â””â”€â”€ tsconfig.json
```

åˆ™å°†ç›®å½•aå’Œç›®å½•bè§†ä¸ºæ ¹ç›®å½•ï¼Œå°†ç»“æœæ‰“åŒ…åˆ°distç›®å½•ä¸‹

## typesã€typeRoots

é»˜è®¤æƒ…å†µä¸‹ï¼ŒTSä¼šåŠ è½½<code>node_modules/@types/</code>ç›®å½•ä¸‹æ‰€æœ‰å£°æ˜æ–‡ä»¶ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸Šé…ç½®é€‰æ‹©åŠ è½½çš„å£°æ˜æ–‡ä»¶

```json
{
  "compilerOptions": {
    "types": ["node"]
  }
}
```

ä»¥ä¸Šé…ç½®å°±åªæœ‰<code>node_modules/@types/node</code>è¢«åŠ è½½

**typeRoots**é…ç½®æ˜¯ç¡®å®šåŠ è½½èŒƒå›´ï¼Œé»˜è®¤æ˜¯<code>node_modules/@types/</code>ç›®å½•

```json
{
  "compilerOptions": {
    "typeRoots": ["node_modules/@types/", "a/@types/"],
    "types": ["node"],
    "skipLibCheck": true
  }
}
```

ä»¥ä¸Šé…ç½®å°±ä¼šå°è¯•åŠ è½½<code>node_modules/@types/node</code>ã€<code>a/@types/node</code>

> æ³¨æ„<code>node_modules/@types/node</code>ã€<code>a/@types/node</code>è·¯å¾„æ˜¯å—baseUrlé…ç½®å½±å“çš„
> é…ç½®å¤šä¸ªå£°æ˜æ–‡ä»¶å¯èƒ½å¯¼è‡´å†…éƒ¨çš„å£°æ˜å†²çªï¼Œå¯ä»¥ä½¿ç”¨**skipLibCheck**é…ç½®ç¦ç”¨å¯¹åŠ è½½ç±»å‹å£°æ˜æ£€æŸ¥

## moduleResolution

è¿™ä¸ªé…ç½®æ˜¯æŒ‡å®šæ¨¡å—çš„è§£æç­–ç•¥ï¼Œæœ‰nodeã€classicé€‰é¡¹ï¼Œé»˜è®¤ä¸ºnodeï¼Œclassicæ˜¯å‘åå…¼å®¹ï¼Œä¸€èˆ¬ä¸æ¨èä½¿ç”¨

### nodeè§£æ

nodeè§£ææ¨¡å¼å°±æ˜¯å’Œnodeä¸€æ ·çš„è§£ææ¨¡å¼ï¼Œä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡ä»¶<code>\<project\>/src/index.js</code>ï¼Œæ–‡ä»¶ä¸­æœ‰å¯¼å…¥è¯­å¥<code>const foo = require("./foo")</code>ï¼Œåˆ™ä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºè§£æ
- <code>\<project\>/src/foo.js</code>æ˜¯å¦å­˜åœ¨
- <code>\<project\>/src/foo</code>æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹
  - <code>\<project\>/src/foo</code>ä¸‹æ˜¯å¦æœ‰<code>package.json</code>æ–‡ä»¶ï¼Œä¸”å†…éƒ¨é…ç½®äº†<code>main</code>æè¿°å…¥å£æ–‡ä»¶
  - å¦‚æœ<code>main</code>é…ç½®äº†<code>./lib/index.js</code>ï¼Œåˆ™ä¼šå°è¯•å¯»æ‰¾<code>\<project\>/src/foo/lib/index.js</code>æ–‡ä»¶
  - å¦‚æœ<code>main</code>æ²¡æœ‰é…ç½®æˆ–æ²¡æœ‰<code>package.json</code>æ–‡ä»¶ï¼Œè¯´æ˜è¿™ä¸ªæ–‡ä»¶å¤¹å¹¶ä¸æ˜¯ä¸€ä¸ªæ¨¡å—æˆ–è€…æ²¡æœ‰å®šä¹‰æ¨¡å—å…¥å£ï¼Œåˆ™ä¼šå°è¯•å¯»æ‰¾<code>\<project\>/src/foo/index.js</code>æ–‡ä»¶
- å¦‚æœä»¥ä¸Šéƒ½ä¸æ˜¯åˆ™åˆ¤æ–­æ‰¾ä¸åˆ°å¼•ç”¨

è¿˜æ˜¯ä»¥ä¸Šçš„ä¾‹å­å¦‚æœ<code>\<project\>/src/index.js</code>ä¸­çš„å¯¼å…¥è¯­å¥æ˜¯ç»å¯¹è·¯å¾„<code>const foo = require("foo")</code>ï¼ŒæŸ¥æ‰¾çš„è§„åˆ™å’Œç›¸å¯¹è·¯å¾„æ˜¯ä¸€æ ·çš„ï¼ˆå…ˆåˆ¤æ–­æ–‡ä»¶ååˆ¤æ–­æ¨¡å—ï¼‰ï¼Œå…ˆæŸ¥æ‰¾è·¯å¾„<code>\<project\>/src/node_modules</code>ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±æŸ¥æ‰¾è·¯å¾„<code>\<project\>/node_modules</code>ï¼Œä¸€ç›´å‘ä¸ŠæŸ¥æ‰¾ç›´åˆ°æ ¹ç›®å½•

### classicè§£æ

æˆ‘ä»¬æ²¿ç”¨nodeè§£æçš„ä¾‹å­å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œclassicè§£æåªä¼šå°è¯•æŸ¥æ‰¾<code>\<project\>/src/foo.ts</code>å’Œ<code>\<project\>/src/foo.d.ts</code>

å¦‚æœæ˜¯ç»å¯¹è·¯å¾„ï¼Œä¼šæŒ‰ç…§ä¸€ä¸‹æµç¨‹è§£æ
- <code>\<project\>/src/foo.ts(.d.ts)</code>
- <code>\<project\>/foo.ts(.d.ts)</code>
- <code>\foo.ts(.d.ts)</code>

## moduleSuffixes

è¯¥é…ç½®åœ¨4.7ç‰ˆæœ¬åå¼•å…¥ï¼ŒåŒæ ·å½±å“åˆ†æç­–ç•¥

```json
{
  "compilerOptions": {
    "moduleSuffixes": [".a", ".b", ""]
  }
}
```

æ¯”å¦‚æˆ‘ä»¬å¢åŠ ä»¥ä¸Šé…ç½®ï¼Œè§£æç­–ç•¥å°±ä¼šåœ¨è§£ææ–‡ä»¶çš„æ—¶å€™å…ˆå°è¯•æŸ¥æ‰¾<code>xxx.a.ts</code>ï¼ŒåæŸ¥æ‰¾<code>xxx.b.ts</code>ï¼Œæœ€åæŸ¥æ‰¾<code>xxx.ts</code>ï¼ˆè¿™é‡Œéœ€è¦æœ€åé…ç½®ç©ºå­—ç¬¦ä¸²ï¼‰

## noResolve

tsä¼šå°†ä»£ç ä¸­å¯¼å…¥çš„æ–‡ä»¶ä¸€åŒè§£æï¼ŒåŒ…æ‹¬importå’Œä¸‰æ–œçº¿æŒ‡ä»¤å¯¼å…¥ï¼Œé…ç½®noResolveå¯ä»¥é˜»æ­¢è§£æ

```ts
// è¯¥æ–‡ä»¶ä¸ä¼šè¢«è§£æï¼Œä½†è¿˜æ˜¯éœ€è¦æ³¨æ„æ–‡ä»¶æˆ–è·¯å¾„æ˜¯å¦åˆæ³•
/// <reference types="vite/client" />
```

## paths

pathsç±»ä¼¼äºWebpackä¸­çš„aliasï¼Œå¯ä»¥é€šè¿‡é…ç½®ç®€åŒ–è·¯å¾„

```json
{
  "compilerOptions": {
    "baseUrl": "./",
    "paths": {
      "@/*": ["./src/*", "./a/*"]
    }
  }
}
```

pathsè·¯å¾„çš„è§£ææ˜¯ç›¸å¯¹äºbaseUrlçš„ï¼Œéœ€è¦ç¡®ä¿é…ç½®äº†baseUrlæ‰è¡Œã€‚pathsçš„å±æ€§å€¼å¯ä»¥é…ç½®æ•°ç»„ï¼Œä¼šæŒ‰ç…§é¡ºåºè§£æè·¯å¾„ï¼Œç›´åˆ°ç¬¦åˆé…ç½®

## resolveJsonModule

å¯åŠ¨è¯¥é…ç½®å¯ä»¥åœ¨.tsæ–‡ä»¶ä¸­å¯¼å…¥.jsonæ–‡ä»¶ï¼Œå¹¶è·å¾—ç±»å‹æ¨å¯¼

```json
// config.json
{
  "a": 1,
  "b": "2"
}
```

```ts
import config from "./config.json"

console.log(config.a)
console.log(config.b)
console.log(config.c) // æŠ¥é”™
```

### outDirã€outFile

outDirå†³å®štsè§£æåè¾“å‡ºç›®å½•ï¼Œä¸€èˆ¬ä¼šå’ŒåŸæœ¬çš„æ–‡ä»¶ç›®å½•ä¿æŒä¸€è‡´

```txt
src
â”œâ”€â”€ utils
â”œâ”€â”€â”€â”€ a.js
â”œâ”€â”€â”€â”€ a.d.js
â”œâ”€â”€ index.js
â”œâ”€â”€ index.d.js
src
â”œâ”€â”€ utils
â”œâ”€â”€â”€â”€ a.ts
â””â”€â”€ index.ts
```

outFileé…ç½®ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼ˆ"./test.js"ï¼‰ï¼Œä¼šå°†è§£æç»“æœæ‰“åŒ…æˆå•ä¸ªæ–‡ä»¶ï¼Œä»…èƒ½åœ¨moduleä¸ºNoneã€Systemã€AMDçš„æ—¶å€™ä½¿ç”¨


## preserveConstEnums

å¦‚æœåœ¨ä»£ç ä¸­å®šä¹‰äº†**å¸¸é‡æšä¸¾**ï¼Œä¼šåœ¨ç¼–è¯‘æ—¶æŠ¹é™¤ï¼Œé…ç½®preserveConstEnumså¯ä»¥é¿å…æŠ¹é™¤

```ts
const enum SexType {
  man = "ç”·",
  woman = "å¥³",
}

console.log(SexType.man);
```

<code>preserveConstEnums: true</code>

```js
"use strict";
var SexType;
(function (SexType) {
    SexType["man"] = "\u7537";
    SexType["woman"] = "\u5973";
})(SexType || (SexType = {}));
console.log("\u7537" /* SexType.man */);
```

<code>preserveConstEnums: false</code>

```js
"use strict";
console.log("\u7537" /* SexType.man */);
```

å¯¹äºä½¿ç”¨çš„åœ°æ–¹è¿˜æ˜¯ä¼šç›´æ¥æ›¿æ¢å€¼

## noEmitã€noEmitOnError

ä¸¤ä¸ªé…ç½®éƒ½æ˜¯tsè§£æåé˜»æ­¢è¾“å‡ºï¼Œ<code>noEmit: true</code>ä¼šåœ¨ä»»ä½•æƒ…å†µéƒ½é˜»æ­¢è¾“å‡ºï¼Œ<code>noEmitOnError: true</code>ä¼šåœ¨è§£ææŠ¥é”™æ—¶é˜»æ­¢è¾“å‡º

> åœ¨tsè§£æè¿‡ç¨‹å¦‚æœå‡ºç°é”™è¯¯ï¼Œtsä¼šæŠ¥å‡ºé”™è¯¯ä½†æ˜¯ä»ä¼šç»§ç»­è§£æå¹¶è¾“å‡ºç»“æœ

## module

moduleé…ç½®æ˜¯æ§åˆ¶tsåœ¨è§£æåè¾“å‡ºjsä»£ç çš„æ¨¡å—åŒ–æ ‡å‡†ï¼Œé…ç½®åŒ…æ‹¬ï¼šCommonJsã€ES6ã€ESNextã€NodeNextã€AMDã€UMDã€Systemç­‰

> tséšç€ç‰ˆæœ¬å‡çº§ä¼šæ–°å¢moduleé…ç½®é€‰é¡¹ï¼Œ4.5ç‰ˆæœ¬æ–°å¢es2022é€‰é¡¹ï¼Œ4.7æ”¯æŒnode16ã€nodenexté€‰é¡¹

## importHelpersã€noEmitHelpers

å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ¯”targeté…ç½®ç‰ˆæœ¬æ›´é«˜çš„è¯­æ³•ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™éœ€è¦å¯¹è¯­æ³•é™çº§ï¼Œéƒ¨åˆ†è¯­æ³•é™çº§æ˜¯é€šè¿‡å·¥å…·å‡½æ•°å®ç°çš„ï¼Œè¿™äº›å‡½æ•°åœ¨tslibä¸­ï¼Œå¦‚æœé…ç½®äº†importHelpersï¼Œåˆ™å·¥å…·å‡½æ•°ä¸ä¼šå‡ºç°åœ¨æ‰“åŒ…ç»“æœä¸­ï¼Œè€Œæ˜¯ä»tslibä¸­å¼•å…¥

> åŒæ ·èƒ½å®ç°è¯­æ³•é™çº§çš„bableï¼Œä»–çš„å·¥å…·å‡½æ•°æ¥è‡ªäºcore-js

å¦‚æœä¸å¸Œæœ›ä½¿ç”¨è¿™äº›å·¥å…·å‡½æ•°å¯ä»¥é…ç½®noEmitHelpersï¼Œtsä¼šå°†å‡½æ•°å£°æ˜åˆ é™¤ï¼Œä½†æ˜¯ä¾ç„¶ä¼šä½¿ç”¨å‡½æ•°è¿›è¡Œè½¬åŒ–ï¼Œè¿™æ—¶å€™éœ€è¦è‡ªå·±å…¨å±€å®šä¹‰å‡½æ•°

## downlevelIteration

> ES6ä¸­æ–°å¢äº† <code>for...of</code> è¯­æ³•ï¼Œä»¥è¿­ä»£çš„æ–¹å¼éå†æ•°æ®ï¼Œä½†éœ€è¦è¯¥æ•°æ®æ—¶å¯è¿­ä»£å¯¹è±¡ï¼Œå°±æ˜¯æ‹¥æœ‰ <code>\[Symbol.iterator\]</code> å±æ€§

å¦‚æœæˆ‘ä»¬targeté…ç½®ä½äºes6ï¼Œé‚£ä¹ˆéœ€è¦æŠŠ <code>for...of</code> é™çº§æˆ <code>for</code> å¾ªç¯ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µäºŒè€…çš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„

```ts
// forå¾ªç¯ä¼šæ‰“å°ä¸¤æ¬¡ï¼Œå› ä¸ºæœ‰äº›å­—ç¬¦çš„unicodeç¼–ç æ˜¯ä¸¤ä½
for(let i = 0; i < 'ğŸ”'.length; i++){
  console.log('ğŸ”'[i])
}

// è€Œfor of åªä¼šæ‰“å°ä¸€æ¬¡
for(let i of 'ğŸ”'){
  console.log(i)
}
```

å¦‚æœä»¥ä¸Šä»£ç è¢«è½¬åŒ–ï¼Œé‚£ä¹ˆç»“æœå°±ä¼šä¸ä¸€æ ·ï¼Œè¿™æ—¶å€™å¯ä»¥é…ç½®downlevelIterationï¼Œå¦‚æœç¯å¢ƒä¸­å­˜åœ¨ï¼ˆæˆ–è€…å¼•å…¥polyfillï¼‰ <code>\[Symbol.iterator]</code> åˆ™ä¸ä¼šè¢«é™çº§

## importsNotUsedAsValuesã€preserveValueImports

é»˜è®¤æƒ…å†µtsåœ¨ç¼–è¯‘åä¼šåˆ é™¤ç±»å‹å¯¼å…¥ <code>import type</code>ï¼Œå¦‚æœå¸Œæœ›ä¿ç•™å¯ä»¥é€šè¿‡importsNotUsedAsValuesé…ç½®

å¦‚æœç±»å‹å’Œå€¼æ˜¯æ··åˆå¯¼å…¥çš„ <code>import {a, AType} from "./a"</code>ï¼Œå¯ä»¥é€šè¿‡é…ç½®preserveValueImportsä¿ç•™

## declarationã€declarationDir

tsç¼–è¯‘åå¯ä»¥è¾“å‡ºå£°æ˜æ–‡ä»¶ï¼Œé€šè¿‡declarationé…ç½®æ§åˆ¶ï¼Œä¾‹å¦‚ <code>src/index.ts</code> ä¼šæ„å»ºå‡ºï¼ˆä¾‹å¦‚æˆ‘ä»¬çš„outDirä¸ºdistï¼‰ <code>dist/index.js</code> å’Œ <code>dist/index.d.ts</code>ï¼Œè¿˜å¯ä»¥é€šè¿‡é…ç½® <code>declarationDir: "./dist/types"</code> å°†å£°æ˜æ–‡ä»¶ç»Ÿä¸€æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ <code>dist/types/index.d.ts</code>

## declarationMap

åœ¨é…ç½®declarationçš„æ—¶å€™å¯ä»¥é€šè¿‡é…ç½®declarationMapè¾“å‡º <code>source map</code>ï¼Œå¯ä»¥ç›´æ¥ä» <code>.d.ts</code> ç›´æ¥æ˜ å°„åˆ°åŸæœ¬çš„ <code>.ts</code> æ–‡ä»¶ï¼Œç®€å•çš„è®²å°±æ˜¯å¯ä»¥é€šè¿‡ç‚¹å‡»ç±»å‹ç›´æ¥è·³è½¬åˆ°ä»£ç ç±»å‹å®šä¹‰çš„åœ°æ–¹è€Œä¸æ˜¯å£°æ˜æ–‡ä»¶

> ä¸€èˆ¬å‘å¸ƒ npm åŒ…æ—¶å¹¶ä¸ä¼šæºå¸¦è¿™äº›æ–‡ä»¶ï¼Œä½†åœ¨ Monorepo ç­‰åœºæ™¯ä¸‹å´æœ‰ç€å¥‡æ•ˆ

## emitDeclarationOnly

é…ç½®ååªè¾“å‡º <code>.d.ts</code> æ–‡ä»¶

> å¯ä»¥åªç”¨tscè¾“å‡ºå£°æ˜æ–‡ä»¶ï¼Œå¯¹äºæºç æ–‡ä»¶å¯ä»¥é€šè¿‡swcæ¥ç¼–è¯‘

## sourceMapã€inlineSourceMap

ç±»ä¼¼äºwebpackçš„é…ç½®ï¼Œç”¨äºç”Ÿæˆæºç åœ°å›¾ï¼ŒsourceMapä¼šè¾“å‡ºä¸€ä¸ª <code>.js.map</code> çš„æ–‡ä»¶ï¼Œè€ŒinlineSourceMapé…ç½®ä¼šå°†æºç åœ°å›¾å†™å…¥åˆ°è¾“å‡ºçš„ <code>.js</code> æ–‡ä»¶ä¸­ï¼Œä¸¤ä¸ªé…ç½®æ˜¯äº’æ–¥çš„

## sourceRootã€mapRoot

ç”¨äºå®šä¹‰æºæ–‡ä»¶å’Œ <code>source map</code> æ–‡ä»¶çš„æ ¹ç›®å½•ï¼Œä¸€èˆ¬ç”¨äºdebugger

## newLine

é…ç½®è¾“å‡ºæ–‡ä»¶çš„æ¢è¡Œé£æ ¼æ˜¯ <code>CRLF</code>ï¼ˆ/r/nï¼‰ è¿˜æ˜¯ <code>LF</code>ï¼ˆ/nï¼‰

## removeComments

ç§»é™¤æ‰€æœ‰æ³¨é‡Š

## stripInternal

é˜»æ­¢ä¸ºè¢«æ ‡è®°ä¸ºinternalçš„ä»£ç è¯­å¥ç”Ÿæˆå¯¹åº”çš„ç±»å‹ï¼Œå³è¢«JSDocæ ‡è®°ä¸º <code>@internal</code>

## ç±»å‹æ£€æŸ¥ç›¸å…³

ä»¥ä¸‹æ˜¯ç±»å‹æ£€æŸ¥ç›¸å…³é…ç½®

## allowUmdGlobalAccess

å¦‚æœé…ç½®UMDæ ¼å¼æ¨¡å— <code>module: "UMD"</code> çš„æ—¶å€™ï¼Œå¦‚æœæœ‰äº›å…¨å±€å˜é‡æ˜¯é€šè¿‡CDNå¼•å…¥ï¼Œå¯ä»¥é…ç½® <code>allowUmdGlobalAccess: true</code> æ¥å…¼å®¹å…¨å±€å˜é‡

> UMDæ¨¡å—æ˜¯å…¼å®¹CommonJså’ŒAMDæ¨¡å—çš„ä¸€ç§æ–¹å¼ï¼Œå†…éƒ¨æ˜¯é€šè¿‡åˆ¤æ–­ç¯å¢ƒæ”¯æŒå“ªç§è§„èŒƒå°±ä½¿ç”¨å“ªç§è§„èŒƒ

```js
// æºç 
export const handler = () => { };

// UMD ç¼–è¯‘ç»“æœ
(function (global, factory) {
    // å°è¯•ä½¿ç”¨ CommonJs
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    // å°è¯•ä½¿ç”¨ AMD
    else if (typeof define === "function" && define.amd) {
        define(["require", "exports"], factory);
    }
    // å…œåº•ï¼Œä½¿ç”¨å…¨å±€å˜é‡æŒ‚è½½
    else {
      (global = global || self, global.handle = factory());
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.handler = void 0;
    const handler = () => { };
    exports.handler = handler;
});
```

## allowUnreachableCode

è¯¥é…ç½®ä¼šå…è®¸ä½¿ç”¨æ— æ³•è¿è¡Œçš„ä»£ç ï¼ˆDead Codeï¼‰

```ts
function test(){
  return null;
  console.log("hellow") // æŠ¥é”™ï¼šæ£€æµ‹åˆ°æ— æ³•è®¿é—®çš„ä»£ç ã€‚ts(7027)
}
```

## allowUnusedLabels

å…è®¸ä½¿ç”¨[label](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/label)è¯­æ³•

## noImplicitAny

è¯¥é…ç½®ç”¨äºé˜»æ­¢è‡ªåŠ¨æ¨å¯¼å‡ºçš„anyç±»å‹ï¼Œå¦‚æœæŸä¸ªå‚æ•°å’Œå˜é‡æ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œä¸”TSä¹Ÿæ— æ³•æ¨å¯¼å‡ºç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å‹å°±æ˜¯anyï¼Œanyä¹Ÿå°±æ„å‘³å¤±å»äº†ç±»å‹æ£€æŸ¥èƒ½åŠ›ã€‚ä¹Ÿå¯ä»¥è‡ªå·±æ˜¾ç¤ºæ ‡è®°ä¸€ä¸ªanyç±»å‹ï¼Œè¡¨ç¤ºç¡®å®å¸Œæœ›è¿™ä¸ªå˜é‡æˆ–å‚æ•°æ˜¯anyç±»å‹

## useUnknownInCatchVariables

å¯ç”¨è¯¥é…ç½®åï¼Œtry/catchä¸­çš„errorç±»å‹ä¼šå˜æˆunknowï¼Œå¦åˆ™æ˜¯any

## noFallthroughCasesInSwitch

å¯ç”¨é…ç½®ç”¨æ¥åˆ¤æ–­switch/caseè¯­å¥ä¸­æ˜¯å¦å­˜åœ¨æ‰§è¡ŒæŸä¸ªcaseä¸­çš„é€»è¾‘ä½†æ˜¯æ²¡æœ‰breakï¼Œå¯¼è‡´ç»§ç»­å‘ä¸‹æ‰§è¡Œ

```js
const key: number = 1;

switch (key) {
  case 1: // æŠ¥é”™ï¼š switch è¯­å¥ä¸­çš„ Fallthrough æƒ…å†µã€‚ts(7029)
    console.log(key);
  case 2:
    console.log(key);
    break;
  default:
    break;
}
```

## noImplicitOverride

åœ¨ç±»ä¸­å¦‚æœæƒ³è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•éœ€è¦ <code>override</code> å…³é”®å­—ã€‚å½“ç„¶å¯ä»¥ä¸ä½¿ç”¨è¯¥å…³é”®å­—ï¼Œå¦‚æœå¯ç”¨è¯¥é…ç½®ï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯

```ts
class F {
  print() {}
}

class S1 extends F {
  print() {} // æŠ¥é”™ï¼šæ­¤æˆå‘˜å¿…é¡»æœ‰ "override" ä¿®é¥°ç¬¦ï¼Œå› ä¸ºå®ƒæ›¿ä»£åŸºç±» "F" ä¸­çš„ä¸€ä¸ªæˆå‘˜ã€‚ts(4114)
}

class S2 extends F {
  override print() {}
}

```

## noImplicitReturns

å¦‚æœåœ¨å‡½æ•°ä¸­ä½¿ç”¨æ¡ä»¶åˆ¤æ–­å¹¶ä¸”æŸä¸ªæ¡ä»¶æœ‰è¿”å›å€¼ï¼Œå¯ç”¨è¯¥é…ç½®åéœ€è¦æ‰€æœ‰çš„æ‰§è¡Œè·¯å¾„éƒ½éœ€è¦æœ‰returnè¯­å¥

```ts
function a(bool: boolean) { // æŠ¥é”™ï¼šå¹¶éæ‰€æœ‰ä»£ç è·¯å¾„éƒ½è¿”å›å€¼ã€‚ts(7030)
  if (bool) {
    return 1;
  } else {
    
  }
}
```

## noImplicitThis

å¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ªå‡½æ•°å£°æ˜ä¸­ä½¿ç”¨thisï¼ŒTSæ˜¯æ— æ³•æ¨å¯¼å‡ºthisçš„ç±»å‹ä»è€Œæ˜¯anyã€‚å¦‚æœä¸æ˜¾ç¤ºå£°æ˜thisçš„ç±»å‹ï¼Œåˆ™å¯ç”¨è¯¥é…ç½®å°±ä¼šæŠ›å‡ºé”™è¯¯

```ts
function setName(name: string) {
  this.name = name; // æŠ¥é”™ï¼š"this" éšå¼å…·æœ‰ç±»å‹ "any"ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ç±»å‹æ³¨é‡Šã€‚ts(2683)
}

const obj = {
  name: "obj",
  setName,
};
```

æ˜¾ç¤ºå£°æ˜this

```ts
function setName(this: typeof obj, name: string) {
  this.name = name;
}

const obj = {
  name: "obj",
  setName,
};
```

> ç¼–è¯‘ç»“æœä¸­ä¼šå»æ‰å‡½æ•° <code>setName</code> ä¸­çš„ <code>this</code> å‚æ•°

## noPropertyAccessFromIndexSignatureã€noUncheckedIndexedAccess

åœ¨ä½¿ç”¨ç´¢å¼•ç±»å‹çš„æ—¶å€™å¯ä»¥è¿…é€Ÿç”Ÿæˆä¸€ä¸ªæ¥å£ç»“æ„

```ts
interface Data {
  name: string;
  [key: string]: string;
}

type DataName = Data["name"]; // string
type DataAge = Data["age"]; // string
```

è¿™ä¹ˆä½¿ç”¨æ˜¯æœ‰ä¸€å®šé£é™©ï¼Œæ²¡åŠæ³•åˆ¤æ–­ <code>age</code> å±æ€§æ˜¯å¦å­˜åœ¨ã€‚

å¦‚æœå¯ç”¨noPropertyAccessFromIndexSignatureé…ç½®ï¼Œåˆ™ç¦æ­¢è®¿é—® <code>age</code>

å¦‚æœå¯ç”¨noUncheckedIndexedAccessé…ç½®ï¼Œåˆ™è®¿é—® <code>age</code> å±æ€§æ—¶ç±»å‹ä¸º <code>string | undefined</code>

## noUnusedLocalsã€noUnusedParameters

æ˜¯å¦å­˜åœ¨ç”Ÿå‘½ä½†æœªä½¿ç”¨çš„å˜é‡æˆ–å‚æ•°

## exactOptionalPropertyTypes

å¦‚æœé…ç½®æ¥å£æˆ–å¯¹è±¡ç±»å‹çš„å±æ€§ä¸ºå¯é€‰

```ts
interface Data {
  name?: "a" | "b"
}

declare const data:Data

data.name = "a"
data.name = "b"
data.name = undefined
```

é‚£ä¹ˆå¯ä»¥å¯¹ <code>data.name</code> èµ‹å€¼undefinedï¼Œå¦‚æœä½ å¸Œæœ› <code>data.name</code> å±æ€§å¯ä»¥ä¸å­˜åœ¨è€Œä¸æ˜¯undefinedçš„è¯å¯ä»¥å¯ç”¨exactOptionalPropertyTypesé…ç½®ï¼Œå¦‚æœä½ ä»éœ€è¦èµ‹å€¼undefinedåˆ™éœ€è¦æ˜¾ç¤ºæ·»åŠ ä¸€ä¸ª

```ts
interface Data {
  name?: "a" | "b" | undefined
}
```

## alwaysStrict

ç±»ä¼¼äºes5çš„ä¸¥æ ¼æ¨¡å¼ï¼Œtsä¼šè¿›è¡Œä¸¥æ ¼æ£€æŸ¥ï¼Œç”Ÿæˆçš„jsæ–‡ä»¶å¤´éƒ¨ä¼šæœ‰ <code>use strict</code> æ ‡è®°

## strict

è¿™æ˜¯ä¸€ç»„è§„åˆ™ç±»é…ç½®çš„æ€»å¼€å…³

- <code>alwaysStrict</code>ã€<code>useUnknownInCatchVariables</code>
- <code>noFallthroughCasesInSwitch</code>ã€<code>noImplicitAny</code>ã€<code>noImplicitThis</code>
- <code>strictNullChecks</code>ã€<code>strictBindCallApply</code>ã€<code>strictFunctionTypes</code>ã€<code>strictPropertyInitialization</code>

## strictBindCallApply

é€šè¿‡bindã€callã€applyæ”¹å˜äº†å‡½æ•°çš„thisæŒ‡å‘ï¼Œå¦‚æœå¸Œæœ›æ ¡éªŒå‡½æ•°å…¥å‚ä¿æŒä¸€è‡´ï¼Œé‚£ä¹ˆå¯ä»¥å¯ç”¨è¯¥é…ç½®

```ts
function fn(num: number) {
  return 123;
}

fn.call(null, "123"); // æŠ¥é”™ï¼šç±»å‹â€œstringâ€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œnumberâ€çš„å‚æ•°ã€‚ts(2345)
```

## strictFunctionTypes

å¯åŠ¨è¯¥é…ç½®ä¼šå¯¹å‡½æ•°å‚æ•°è¿›è¡Œæ£€æŸ¥

```ts
function fn(num: number) {
  return 123;
}

type Fn = (prop: number | string) => number;

const test1: Fn = fn; // æŠ¥é”™ï¼šä¸èƒ½å°†ç±»å‹â€œ(num: number) => numberâ€åˆ†é…ç»™ç±»å‹â€œFnâ€ã€‚
```

åªèƒ½é€šè¿‡propertyçš„å½¢å¼å£°æ˜æ‰ä¼šæœ‰ä¸¥æ ¼æ£€æŸ¥

```ts
function fn(num: number) {
  return 123;
}

type Obj = {
  fn(prop: number | string): number;
  fn1: (prop: number | string) => number;
};

const test1: Obj = {
  fn: fn,
  fn1: fn, // æŠ¥é”™ï¼šä¸èƒ½å°†ç±»å‹â€œ(num: number) => numberâ€åˆ†é…ç»™ç±»å‹â€œ(prop: string | number) => numberâ€ã€‚
};
```

## strictNullChecks

å…³é—­çš„æƒ…å†µä¸‹nullå’Œundefinedä¼šè®¤ä¸ºæ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼ˆä»»ä½•é¡¹ç›®éƒ½åº”è¯¥å¼€å¯è¯¥é€‰é¡¹ï¼‰

```ts
const test1:string = null
const test2:number = undefined
```

ä»¥ä¸Šä»£ç åœ¨å…³é—­strictNullChecksæ—¶æ˜¯æˆç«‹çš„

## strictPropertyInitialization

è¦æ±‚classä¸­çš„å±æ€§éƒ½è¦æœ‰åˆå§‹å€¼ï¼Œå¦‚æœæœ‰äº›å±æ€§æ˜¯åœ¨æŸäº›å‡½æ•°ä¸­èµ‹å€¼çš„å¯ä»¥ä½¿ç”¨éç©ºæ–­è¨€

```ts
class Foo{
  prop1: string = "hellow"
  prop2!: number

  constructor(prop1: string){
    this.prop1 = prop1
    this.init()
  }

  init(){
    this.prop2 = 123
  }
}
```

## skipLibCheckã€skipDefaultLibCheck

å¼€å¯çŠ¶æ€ä¸‹tsä¼šå¯¹åŠ è½½çš„å£°æ˜æ–‡ä»¶è¿›è¡Œæ£€æŸ¥ï¼ŒåŒ…æ‹¬ <code>.d.ts</code> å’Œ <code>@types/</code> ä¸‹çš„æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å¯èƒ½ä¼šå£°æ˜é‡å¤çš„å…¨å±€ç±»å‹ï¼Œå¯ä»¥å…³é—­skipLibChecké…ç½®æ¥æå‡ç¼–è¯‘é€Ÿåº¦

skipDefaultLibChecké…ç½®ä¼šè·³è¿‡ <code>/// \<reference no-default-lib="true"\/></code> çš„æ–‡ä»¶ï¼Œè¿™ä¸€ä¸‰æ–œçº¿æŒ‡ä»¤çš„ä½œç”¨å³æ˜¯å°†æ­¤æ–‡ä»¶æ ‡è®°ä¸ºé»˜è®¤åº“å£°æ˜ï¼Œå› æ­¤å¼€å¯è¿™ä¸€é…ç½®åï¼Œç¼–è¯‘å™¨åœ¨å¤„ç†å…¶æ–‡ä»¶æ—¶ä¸ä¼šå†å°è¯•å¼•å…¥é»˜è®¤åº“å£°æ˜ã€‚

## å·¥ç¨‹ç›¸å…³

ä»¥ä¸‹æ˜¯å·¥ç¨‹ç›¸å…³é…ç½®

## references

## composite

è¯¥é…ç½®æ˜¯compilerOptionså†…çš„é…ç½®ï¼Œåœ¨referencesä¸­è¢«å¼•ç”¨çš„å­é¡¹ç›®çš„ <code>tsconfig.json</code> å¿…é¡»å¯ç”¨compositeï¼Œé€šè¿‡è¿™ä¸ªé…ç½®ç¡®ä¿å­é¡¹ç›®èƒ½è¢«å¼•ç”¨

## isolatedModules

## allowJs

å¯ç”¨åå¯ä»¥åœ¨tsæ–‡ä»¶ä¸­å¯¼å…¥ <code>.js</code> æˆ– <code>.jsx</code> æ–‡ä»¶ä¸­

## checkJs

å¼€å¯jsæ–‡ä»¶ä¸­çš„ç±»å‹æ£€æŸ¥ï¼Œé…åˆallowJsä½¿ç”¨

## esModuleInteropã€allowSyntheticDefaultImports

è¯¥é…ç½®æ˜¯ä¸ºäº†è§£å†³ESMå’ŒCJSæ¨¡å—äº’ç›¸å¯¼å…¥å¯¼å‡ºäº§ç”Ÿçš„é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆçœ‹é—®é¢˜

```ts
// a.ts
module.exports = {
    a: 1,
    b: 2,
};

// index.ts
import A from "./a";
import { a } from "./a";
import * as modules from "./a";

console.log(A) // æœŸæœ›ï¼š{ a: 1, b: 2 }
console.log(a) // æœŸæœ›ï¼š1
console.log(modules) // æœŸæœ›ï¼š{ a: 1, b: 2 }
```

åˆ†åˆ«åœ¨ä¸¤ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨ä¸åŒçš„æ¨¡å—å¯¼å…¥å¯¼å‡ºæ–¹å¼ï¼ŒæœŸæœ›è·å¾—åˆ°æ³¨é‡Šä¸­çš„ç»“æœï¼Œæˆ‘ä»¬æŸ¥çœ‹ç¼–è¯‘ç»“æœ

```js
// index.js
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const a_1 = require("./a");
const a_2 = require("./a");
const modules = require("./a");
console.log(a_1.default);
console.log(a_2.a);
console.log(modules);
```

è¿™é‡Œæˆ‘ä»¬é…ç½®äº† <code>"module": "CommonJS"</code> æ‰€ä»¥å°†ESMéƒ½è½¬åŒ–æˆäº†CJSæ¨¡å—å¯¼å…¥ï¼Œå¯ä»¥çœ‹åˆ°é™¤äº†é»˜è®¤å¯¼å…¥ <code>a_1.default</code> è¿™é‡Œçš„ä½¿ç”¨æœ‰äº›æ”¹å˜ï¼Œå…¶ä»–çš„è§„åˆ™éƒ½ä¸å˜

è¿™æ˜¯å› ä¸ºTSé»˜è®¤å°†CJSå’ŒESMè§„åˆ™è§†ä¸ºä¸€è‡´ï¼Œåœ¨å…·åå¯¼å…¥æ—¶ <code>module.exports.a = 123</code> å’Œ <code>exports const a = 123</code> è¿™ä¸¤ä¸ªå¯¼å‡ºæ–¹å¼æ˜¯ç­‰ä»·çš„

ä½†æ˜¯CJSæ²¡æœ‰é»˜è®¤å¯¼å‡ºçš„è§„åˆ™ï¼Œé‚£ä¹ˆåªèƒ½å»ºç«‹ä¸€ä¸ª <code>module.exports.default = 123</code> ç­‰ä»·äº <code>exports const default = 123</code> çš„è§„åˆ™ï¼Œå°±åƒä¸Šé¢ç¼–è¯‘å‡ºçš„ç»“æœ <code>a_1.default</code>

CJSä¸­æ˜¯å­˜åœ¨å‘½åç©ºé—´å¯¼å‡ºï¼Œ<code>const A = require("./a")</code> ç­‰ä»·äº <code>import * as A from "./a"</code>

é—®é¢˜åªå‡ºç°åœ¨é»˜è®¤å¯¼å‡ºä¸Šï¼Œç”±äº <code>a.ts</code> æ–‡ä»¶å¹¶æ²¡æœ‰æä¾› <code>module.exports.default</code> çš„å¯¼å‡ºï¼Œåœ¨ <code>index.js</code> çš„ç¼–è¯‘ç»“æœä¸­è®¿é—® <code>a_1.default</code> æ˜¯undefined

å¦‚æœé…ç½®äº†esModuleInteropï¼ŒTSå°±ä¼šä½¿ç”¨ä¸€äº›å·¥å…·å‡½æ•°æ¥å¤„ç†ESMå¯¼å…¥çš„é€»è¾‘

```js
// index.js
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const a_1 = __importDefault(require("./a"));
const a_2 = require("./a");
const modules = __importStar(require("./a"));
console.log(a_1.default); // æœŸæœ›ï¼š{ a: 1, b: 2 }
console.log(a_2.a); // æœŸæœ›ï¼š1
console.log(modules); // æœŸæœ›ï¼š{ a: 1, b: 2 }
```

æˆ‘ä»¬å…ˆçœ‹ <code>__importDefault</code> å‡½æ•°ï¼Œå‡½æ•°å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ¤æ–­å¦‚æœå¯¼å…¥çš„æ¨¡å—æ˜¯ESMï¼Œåˆ™å¤–é¢å¥—ä¸€å±‚ <code>{ "default": mod }</code>ï¼Œè¿™æ ·åœ¨è®¿é—® <code>a_1.default</code> å°±æ˜¯ <code>{ a: 1, b: 2 }</code> çš„ç»“æœäº†

<code>__importStar</code> å‡½æ•°æ˜¯å¤„ç† <code>import * as modules from "./a"</code> å½¢å¼å¯¼å…¥çš„ï¼Œé¦–å…ˆåˆ¤æ–­éESMæ¨¡å—ï¼Œä¹‹ååˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ <code>result</code>ï¼Œåéå†æ¨¡å— <code>require("./a")</code> å¯¼å‡ºçš„å†…å®¹ï¼Œä½¿ç”¨ <code>__createBinding</code> å‡½æ•°å°† <code>require("./a")</code> æ¨¡å—å¯¼å‡ºçš„å±æ€§éƒ½èµ‹å€¼åˆ° <code>result</code> ä¸Šï¼Œåè°ƒç”¨ <code>__setModuleDefault</code> å‡½æ•°å°† <code>require("./a")</code> æ¨¡å—å¯¼å‡ºçš„å±æ€§åœ¨èµ‹å€¼åˆ° <code>result.default</code> ä¸Šã€‚è¿™æ ·ä½¿ç”¨ <code>modules</code> æˆ–è€… <code>modules.default</code> éƒ½å¯ä»¥è·å– <code>require("./a")</code> æ¨¡å—å¯¼å‡ºçš„å±æ€§

å¯åŠ¨esModuleInteropé…ç½®çš„æ—¶å€™ä¼šè‡ªåŠ¨å¯åŠ¨allowSyntheticDefaultImportsé…ç½®ï¼ŒallowSyntheticDefaultImportsé…ç½®æ˜¯ä¼šåœ¨æ²¡æœ‰é»˜è®¤å¯¼å‡ºçš„CJSæ¨¡å—æä¾›æ¨¡æ‹Ÿçš„é»˜è®¤å¯¼å‡º

```js
module.exports = 123

// â†‘ æ¨¡æ‹Ÿä¸º â†“

module.exports = 123
module.exports.default = 123
```

## incrementalã€tsBuildInfoFile

å¯ç”¨incrementalé…ç½®ä¼šå¯åŠ¨å¢é‡ç¼–è¯‘ï¼Œå°±æ˜¯åœ¨æ¯æ¬¡ç¼–è¯‘å‰å…ˆdiffå‡ºå˜æ›´æ–‡ä»¶ï¼Œä»…å¯¹å˜æ›´æ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œç„¶åä¼šç”Ÿæˆä¸€ä¸ª <code>.tsbuildinfo</code> æ–‡ä»¶ï¼Œé»˜è®¤åœ¨è¾“å‡ºç›®å½•çš„æ ¹ç›®å½• <code>tsconfig.tsbuildinfo</code>ï¼Œä¹Ÿå¯ä»¥é€šè¿‡tsBuildInfoFileé…ç½®ä¿®æ”¹è¯¥æ–‡ä»¶ä½ç½®ä»¥åŠæ–‡ä»¶å

## watchOptions

ç±»ä¼¼äºnodemonï¼ŒTSå¯ä»¥é€šè¿‡ <code>tsc --watch</code> æ¥å¯åŠ¨ç›‘å¬æ–‡ä»¶ï¼Œä¼šå¯¹node_modulesæ–‡ä»¶è¿›è¡Œç›‘å¬ï¼Œåªåˆ°æ–‡ä»¶å¤¹çº§åˆ«ï¼Œå¯ä»¥é€šè¿‡watchOptionsæ¥é…ç½®ç›‘å¬è¡Œä¸º

```json
{
  "compilerOptions": {
    // ...
  },
  "watchOptions": {
    "watchFile": "useFsEvents",
    "watchDirectory": "useFsEvents",
    "fallbackPolling": "dynamicPriority",
    "synchronousWatchDirectory": true,
    "excludeDirectories": ["**/node_modules", "_build"],
    "excludeFiles": ["build/fileWhichChangesOften.ts"]
  }
}
```

watchFileå’ŒwatchDirectoryæ˜¯ç›‘å¬æ–‡ä»¶æˆ–ç›®å½•çš„æ¨¡å¼ï¼ŒwatchDirectoryåªæœ‰fixedPollingIntervalã€dynamicPriorityPollingã€useFsEventsé€‰é¡¹
- fixedPollingIntervalï¼Œå›ºå®šæ—¶é—´é—´éš”æ¯ç§’å¤šæ¬¡æ£€æŸ¥æ–‡ä»¶ä¿®æ”¹
- priorityPollingIntervalï¼Œç±»ä¼¼fixedPollingIntervalï¼Œç‰¹æ®Šæ–‡ä»¶æ£€æŸ¥é¢‘ç‡é™ä½
- dynamicPriorityPollingï¼Œå¯ç”¨åŠ¨æ€é˜Ÿåˆ—ï¼Œä¿®æ”¹é¢‘ç‡ä½çš„æ–‡ä»¶ç›‘å¬é¢‘ç‡é™ä½
- useFsEventsï¼Œä½¿ç”¨æ“ä½œç³»ç»ŸåŸç”Ÿäº‹ä»¶ç›‘å¬ï¼ˆé»˜è®¤å€¼ï¼‰
- useFsEventsOnParentDirectoryï¼Œå°è¯•ä½¿ç”¨æ“ä½œç³»ç»Ÿ/æ–‡ä»¶ç³»ç»Ÿçš„æœ¬æœºäº‹ä»¶æ¥ç›‘å¬æ–‡ä»¶çš„çˆ¶ç›®å½•ä¸Šçš„æ›´æ”¹

å…¶ä»–çš„é…ç½®å¯ä»¥å‚è€ƒ[å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/tsconfig#watchOptions)

## extends

å¼•å…¥é…ç½®ï¼Œå¯ä»¥æ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªnpmåŒ…

```json
{
  "extends": "myTSConfig/tsconfig.json",
  "extends": "./myTSConfig/tsconfig.json"
}
```
